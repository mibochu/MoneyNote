# ë¦¬ì•¡íŠ¸ í¼ ì²˜ë¦¬ ê³ ê¸‰ íŒ¨í„´

## ğŸ¯ í•™ìŠµ ëª©í‘œ
ë³µì¡í•œ í¼ ìš”êµ¬ì‚¬í•­ì„ ì²´ê³„ì ìœ¼ë¡œ ì²˜ë¦¬í•˜ëŠ” React íŒ¨í„´ë“¤ì„ ì´í•´í•˜ê³  ì‹¤ì œ í”„ë¡œì íŠ¸ì— ì ìš©í•œë‹¤.

## ğŸ“– ë°°ê²½: ì™œ ê³ ê¸‰ íŒ¨í„´ì´ í•„ìš”í•œê°€?

### ë‹¨ìˆœí•œ í¼ì˜ í•œê³„
ì´ˆë³´ìê°€ ë§Œë“œëŠ” í¼ì€ ë³´í†µ ì´ëŸ° ëª¨ìŠµì…ë‹ˆë‹¤:

```typescript
const SimpleForm = () => {
  const [name, setName] = useState('');
  const [email, setEmail] = useState('');
  
  const handleSubmit = () => {
    // ê²€ì¦ ë¡œì§ì´ ì—¬ê¸° ì„ì—¬ìˆìŒ
    if (!name) alert('ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”');
    if (!email) alert('ì´ë©”ì¼ì„ ì…ë ¥í•˜ì„¸ìš”');
    // ì €ì¥ ë¡œì§ë„ ì—¬ê¸° ì„ì—¬ìˆìŒ
    localStorage.setItem('user', JSON.stringify({name, email}));
  };
  
  return (
    <form onSubmit={handleSubmit}>
      <input value={name} onChange={e => setName(e.target.value)} />
      <input value={email} onChange={e => setEmail(e.target.value)} />
      <button type="submit">ì €ì¥</button>
    </form>
  );
};
```

**ë¬¸ì œì ë“¤:**
- ê²€ì¦ ë¡œì§ê³¼ UI ë¡œì§ì´ ì„ì—¬ìˆìŒ
- ì—ëŸ¬ ìƒíƒœ ê´€ë¦¬ê°€ ë¶€ì‹¤í•¨
- ì¬ì‚¬ìš©ì´ ì–´ë ¤ì›€
- í…ŒìŠ¤íŠ¸í•˜ê¸° ë³µì¡í•¨

## ğŸ—ï¸ í•´ê²°ì±…: Container/Presentational íŒ¨í„´

### 1ë‹¨ê³„: ë°ì´í„° êµ¬ì¡° ì„¤ê³„
ë¨¼ì € ë‹¤ë£° ë°ì´í„°ì˜ êµ¬ì¡°ë¥¼ ëª…í™•íˆ ì •ì˜í•©ë‹ˆë‹¤:

```typescript
// ì‹¤ì œ ì €ì¥ë  ë°ì´í„°
interface ExpenseFormData {
  amount: number;
  category: string;
  subcategory: string;
  description: string;
  paymentMethod: PaymentMethod;
  tags: string[];
  isFixed: boolean;
  date: Date;
}

// í¼ì˜ ìƒíƒœ (ì—ëŸ¬ ë“± ì¶”ê°€ ì •ë³´ í¬í•¨)
interface FormState {
  data: ExpenseFormData;
  errors: Partial<Record<keyof ExpenseFormData, string>>;
  isSubmitting: boolean;
}
```

### 2ë‹¨ê³„: Presentational ì»´í¬ë„ŒíŠ¸ (ìˆœìˆ˜ UI)
UIë§Œ ë‹´ë‹¹í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ë¥¼ ë§Œë“­ë‹ˆë‹¤:

```typescript
interface ExpenseFormProps {
  // ë°ì´í„°
  formData: ExpenseFormData;
  errors: Partial<Record<keyof ExpenseFormData, string>>;
  isLoading: boolean;
  
  // ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ë“¤
  onAmountChange: (amount: number) => void;
  onCategoryChange: (categoryId: string) => void;
  onDescriptionChange: (description: string) => void;
  onSubmit: (data: ExpenseFormData) => void;
  onCancel?: () => void;
  
  // ê¸°íƒ€ ì„¤ì •
  categories: CategoryData[];
}

const ExpenseForm: React.FC<ExpenseFormProps> = ({
  formData,
  errors,
  isLoading,
  onAmountChange,
  onCategoryChange,
  onDescriptionChange,
  onSubmit,
  onCancel,
  categories
}) => {
  // ì—¬ê¸°ì—ëŠ” ìˆœìˆ˜í•œ UI ë¡œì§ë§Œ!
  return (
    <Card>
      <CardContent>
        <CurrencyInput
          value={formData.amount}
          onAmountChange={onAmountChange}
          error={!!errors.amount}
          helperText={errors.amount}
        />
        {/* ë‹¤ë¥¸ í•„ë“œë“¤... */}
      </CardContent>
    </Card>
  );
};
```

### 3ë‹¨ê³„: Container ì»´í¬ë„ŒíŠ¸ (ë¡œì§ ì²˜ë¦¬)
ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ë‹´ë‹¹í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ë¥¼ ë§Œë“­ë‹ˆë‹¤:

```typescript
const ExpenseFormContainer: React.FC<ContainerProps> = ({
  initialData,
  onSuccess,
  onCancel
}) => {
  // ìƒíƒœ ê´€ë¦¬
  const [formData, setFormData] = useState<ExpenseFormData>(initialData || defaultData);
  const [errors, setErrors] = useState<FormErrors>({});
  const [isSubmitting, setIsSubmitting] = useState(false);
  
  // ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
  const { addExpense, updateExpense } = useExpenses();
  const { categories } = useCategories();
  
  // ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ë“¤
  const handleAmountChange = (amount: number) => {
    setFormData(prev => ({ ...prev, amount }));
    
    // ì‹¤ì‹œê°„ ê²€ì¦
    const error = validateField('amount', amount);
    setErrors(prev => ({ ...prev, amount: error || undefined }));
  };
  
  const handleSubmit = async (data: ExpenseFormData) => {
    setIsSubmitting(true);
    try {
      await addExpense(data);
      onSuccess?.();
    } catch (error) {
      // ì—ëŸ¬ ì²˜ë¦¬
    } finally {
      setIsSubmitting(false);
    }
  };
  
  return (
    <ExpenseForm
      formData={formData}
      errors={errors}
      isLoading={isSubmitting}
      onAmountChange={handleAmountChange}
      onSubmit={handleSubmit}
      onCancel={onCancel}
      categories={categories}
    />
  );
};
```

## ğŸ” ì‹¤ì‹œê°„ ê²€ì¦ íŒ¨í„´

### ê²€ì¦ ë¡œì§ì˜ ì™¸ë¶€í™”
ê²€ì¦ ë¡œì§ì„ ë³„ë„ íŒŒì¼ë¡œ ë¶„ë¦¬í•©ë‹ˆë‹¤:

```typescript
// validators/expenseValidators.ts
export const validateAmount = (amount: number): string | null => {
  if (amount <= 0) return 'ê¸ˆì•¡ì€ 0ë³´ë‹¤ í° ê°’ì´ì–´ì•¼ í•©ë‹ˆë‹¤.';
  if (amount > 10000000) return 'ê¸ˆì•¡ì´ ë„ˆë¬´ í½ë‹ˆë‹¤.';
  return null;
};

export const validateExpenseForm = (data: ExpenseFormData) => {
  const errors: FormErrors = {};
  
  const amountError = validateAmount(data.amount);
  if (amountError) errors.amount = amountError;
  
  // ë‹¤ë¥¸ ê²€ì¦ë“¤...
  
  return {
    isValid: Object.keys(errors).length === 0,
    errors
  };
};
```

### ì‹¤ì‹œê°„ ê²€ì¦ì˜ êµ¬í˜„
ì‚¬ìš©ìê°€ ì…ë ¥í•˜ëŠ” ì¦‰ì‹œ ê²€ì¦ ê²°ê³¼ë¥¼ ë³´ì—¬ì¤ë‹ˆë‹¤:

```typescript
const handleFieldChange = (field: keyof ExpenseFormData, value: any) => {
  // 1. ë°ì´í„° ì—…ë°ì´íŠ¸
  setFormData(prev => ({ ...prev, [field]: value }));
  
  // 2. ì‹¤ì‹œê°„ ê²€ì¦
  const error = validateField(field, value);
  
  // 3. ì—ëŸ¬ ìƒíƒœ ì—…ë°ì´íŠ¸
  setErrors(prev => ({ 
    ...prev, 
    [field]: error || undefined 
  }));
};
```

## ğŸ’¡ ë³µì¡í•œ ìƒíƒœ ê´€ë¦¬ íŒ¨í„´

### useReducerë¥¼ í™œìš©í•œ ìƒíƒœ í†µí•©
ë³µì¡í•œ í¼ ìƒíƒœëŠ” useReducerë¡œ ê´€ë¦¬í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤:

```typescript
interface FormState {
  data: ExpenseFormData;
  errors: FormErrors;
  isSubmitting: boolean;
  isDirty: boolean; // ì‚¬ìš©ìê°€ ìˆ˜ì •í–ˆëŠ”ì§€ ì—¬ë¶€
}

type FormAction = 
  | { type: 'SET_FIELD'; field: keyof ExpenseFormData; value: any }
  | { type: 'SET_ERROR'; field: keyof ExpenseFormData; error: string | null }
  | { type: 'SET_SUBMITTING'; isSubmitting: boolean }
  | { type: 'RESET_FORM' };

const formReducer = (state: FormState, action: FormAction): FormState => {
  switch (action.type) {
    case 'SET_FIELD':
      return {
        ...state,
        data: { ...state.data, [action.field]: action.value },
        isDirty: true
      };
    
    case 'SET_ERROR':
      return {
        ...state,
        errors: { 
          ...state.errors, 
          [action.field]: action.error || undefined 
        }
      };
    
    // ë‹¤ë¥¸ ì•¡ì…˜ë“¤...
    
    default:
      return state;
  }
};
```

## ğŸ¨ ì‚¬ìš©ì ê²½í—˜ ê°œì„  íŒ¨í„´

### 1. ì ì§„ì  ê³µê°œ (Progressive Disclosure)
ë³µì¡í•œ í¼ì„ ë‹¨ê³„ë³„ë¡œ ë‚˜ëˆ„ì–´ ë³´ì—¬ì¤ë‹ˆë‹¤:

```typescript
const [currentStep, setCurrentStep] = useState(1);

const renderStep = () => {
  switch (currentStep) {
    case 1:
      return <BasicInfoStep />; // ê¸ˆì•¡, ë‚ ì§œ, ê¸°ë³¸ ì •ë³´
    case 2:
      return <CategorizationStep />; // ì¹´í…Œê³ ë¦¬, íƒœê·¸
    case 3:
      return <DetailsStep />; // ìƒì„¸ ì„¤ëª…, ì¶”ê°€ ì˜µì…˜
    default:
      return <BasicInfoStep />;
  }
};
```

### 2. ìë™ ì €ì¥ (Auto-save)
ì‚¬ìš©ìì˜ ì…ë ¥ì„ ì£¼ê¸°ì ìœ¼ë¡œ ì„ì‹œ ì €ì¥í•©ë‹ˆë‹¤:

```typescript
const useAutoSave = (data: ExpenseFormData, delay: number = 2000) => {
  const [lastSaved, setLastSaved] = useState<Date | null>(null);
  
  useEffect(() => {
    const timer = setTimeout(() => {
      // ì„ì‹œ ì €ì¥
      localStorage.setItem('expense_draft', JSON.stringify(data));
      setLastSaved(new Date());
    }, delay);
    
    return () => clearTimeout(timer);
  }, [data, delay]);
  
  return lastSaved;
};
```

### 3. ìŠ¤ë§ˆíŠ¸ ê¸°ë³¸ê°’
ì‚¬ìš©ìì˜ ì´ì „ ì…ë ¥ì„ ê¸°ë°˜ìœ¼ë¡œ ê¸°ë³¸ê°’ì„ ì œì•ˆí•©ë‹ˆë‹¤:

```typescript
const useSmartDefaults = () => {
  const { expenses } = useExpenses();
  
  const getDefaultCategory = () => {
    // ìµœê·¼ 3ê°œ ì§€ì¶œì˜ ê°€ì¥ ë§ì´ ì‚¬ìš©ëœ ì¹´í…Œê³ ë¦¬
    const recentExpenses = expenses.slice(0, 3);
    const categoryCount = recentExpenses.reduce((acc, expense) => {
      acc[expense.category] = (acc[expense.category] || 0) + 1;
      return acc;
    }, {} as Record<string, number>);
    
    return Object.keys(categoryCount).sort((a, b) => 
      categoryCount[b] - categoryCount[a]
    )[0];
  };
  
  return {
    category: getDefaultCategory(),
    paymentMethod: 'card', // ê°€ì¥ ë§ì´ ì‚¬ìš©í•˜ëŠ” ê²°ì œìˆ˜ë‹¨
    date: new Date()
  };
};
```

## ğŸ§ª í…ŒìŠ¤íŠ¸í•˜ê¸° ì‰¬ìš´ êµ¬ì¡°

### Pure Functionìœ¼ë¡œ ê²€ì¦ ë¡œì§ ë¶„ë¦¬
```typescript
// í…ŒìŠ¤íŠ¸í•˜ê¸° ì‰¬ìš´ ìˆœìˆ˜ í•¨ìˆ˜
describe('validateAmount', () => {
  test('ì–‘ìˆ˜ê°€ ì•„ë‹Œ ê²½ìš° ì—ëŸ¬ ë°˜í™˜', () => {
    expect(validateAmount(0)).toBe('ê¸ˆì•¡ì€ 0ë³´ë‹¤ í° ê°’ì´ì–´ì•¼ í•©ë‹ˆë‹¤.');
    expect(validateAmount(-100)).toBe('ê¸ˆì•¡ì€ 0ë³´ë‹¤ í° ê°’ì´ì–´ì•¼ í•©ë‹ˆë‹¤.');
  });
  
  test('ì •ìƒ ê¸ˆì•¡ì¸ ê²½ìš° null ë°˜í™˜', () => {
    expect(validateAmount(1000)).toBe(null);
  });
});
```

### ì»´í¬ë„ŒíŠ¸ í…ŒìŠ¤íŠ¸
```typescript
// ìˆœìˆ˜ UI ì»´í¬ë„ŒíŠ¸ í…ŒìŠ¤íŠ¸
test('ì—ëŸ¬ê°€ ìˆì„ ë•Œ ì—ëŸ¬ ë©”ì‹œì§€ í‘œì‹œ', () => {
  render(
    <ExpenseForm
      formData={mockData}
      errors={{ amount: 'ê¸ˆì•¡ì„ ì…ë ¥í•˜ì„¸ìš”' }}
      onAmountChange={jest.fn()}
      // ...
    />
  );
  
  expect(screen.getByText('ê¸ˆì•¡ì„ ì…ë ¥í•˜ì„¸ìš”')).toBeInTheDocument();
});
```

## ğŸš€ ì‹¤ì œ ì ìš© ê²°ê³¼

### Before (ë‹¨ìˆœí•œ í¼)
```typescript
// ëª¨ë“  ê²ƒì´ í•œ ê³³ì— ì„ì—¬ìˆìŒ
const ExpenseForm = () => {
  const [amount, setAmount] = useState(0);
  const [category, setCategory] = useState('');
  // ... 20ê°œì˜ useState
  
  const handleSubmit = () => {
    // 100ì¤„ì˜ ê²€ì¦ + ì €ì¥ ë¡œì§
  };
  
  return (
    // 200ì¤„ì˜ JSX
  );
};
```

### After (íŒ¨í„´ ì ìš© í›„)
```typescript
// ê°ê° ëª…í™•í•œ ì—­í• 
const ExpenseForm = (props) => {
  // ìˆœìˆ˜ UIë§Œ 30ì¤„
};

const ExpenseFormContainer = () => {
  // ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ë§Œ 50ì¤„
};

const expenseValidators = {
  // ê²€ì¦ ë¡œì§ë§Œ 40ì¤„
};
```

## ğŸ“Š ê°œì„  íš¨ê³¼

### ê°œë°œ ìƒì‚°ì„±
- **ì½”ë“œ ì¬ì‚¬ìš©ì„±**: UI ì»´í¬ë„ŒíŠ¸ë¥¼ ë‹¤ë¥¸ ê³³ì—ì„œë„ í™œìš© ê°€ëŠ¥
- **í…ŒìŠ¤íŠ¸ ìš©ì´ì„±**: ê° ë¶€ë¶„ì„ ë…ë¦½ì ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ ê°€ëŠ¥
- **ìœ ì§€ë³´ìˆ˜ì„±**: ë³€ê²½ì´ í•„ìš”í•œ ë¶€ë¶„ë§Œ ìˆ˜ì • ê°€ëŠ¥

### ì‚¬ìš©ì ê²½í—˜
- **ì‹¤ì‹œê°„ í”¼ë“œë°±**: ì…ë ¥ê³¼ ë™ì‹œì— ê²€ì¦ ê²°ê³¼ í™•ì¸
- **ëª…í™•í•œ ì—ëŸ¬ ë©”ì‹œì§€**: ì–´ë–¤ ë¶€ë¶„ì„ ìˆ˜ì •í•´ì•¼ í•˜ëŠ”ì§€ ëª…í™•
- **ë¶€ë“œëŸ¬ìš´ ì¸í„°ë ‰ì…˜**: ë¡œë”© ìƒíƒœ, ì„±ê³µ/ì‹¤íŒ¨ í”¼ë“œë°±

## ğŸ¯ í•µì‹¬ í¬ì¸íŠ¸

1. **ê´€ì‹¬ì‚¬ ë¶„ë¦¬**: UI, ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§, ê²€ì¦ ë¡œì§ì„ ëª…í™•íˆ ë¶„ë¦¬
2. **ìƒíƒœ êµ¬ì¡°í™”**: ë³µì¡í•œ ìƒíƒœëŠ” useReducerë¡œ ì²´ê³„ì  ê´€ë¦¬
3. **ì‹¤ì‹œê°„ í”¼ë“œë°±**: ì‚¬ìš©ì ê²½í—˜ì„ ìœ„í•œ ì¦‰ì‹œ ê²€ì¦
4. **ì¬ì‚¬ìš©ì„± ê³ ë ¤**: ë‹¤ë¥¸ ê³³ì—ì„œë„ í™œìš© ê°€ëŠ¥í•œ êµ¬ì¡°ë¡œ ì„¤ê³„

ì´ëŸ° íŒ¨í„´ë“¤ì„ ì ìš©í•˜ë©´, ë³µì¡í•œ í¼ë„ ì²´ê³„ì ìœ¼ë¡œ ê´€ë¦¬í•  ìˆ˜ ìˆê³ , ì‚¬ìš©ìì—ê²ŒëŠ” ë” ì¢‹ì€ ê²½í—˜ì„ ì œê³µí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤! ğŸ‰