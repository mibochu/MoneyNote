# í¼-ì²˜ë¦¬-íŒ¨í„´

## ğŸ¯ í•™ìŠµ ëª©í‘œ
- Controlled vs Uncontrolled Componentsì˜ ì°¨ì´ì ì„ ì•Œì•„ë³´ì
- ì»¤ìŠ¤í…€ Input ì»´í¬ë„ŒíŠ¸ë¥¼ ì˜ ì„¤ê³„í•˜ëŠ” ë°©ë²•ì„ ë°°ìš°ì
- ì´ë²¤íŠ¸ ê°ì²´ë¥¼ ìˆ˜ì •í•´ì„œ í¼ ì²˜ë¦¬ë¥¼ í¸í•˜ê²Œ í•˜ëŠ” ê¸°ë²•ì„ ìµíˆì

## ğŸ¤” ì´ê±¸ ì™œ í–ˆëŠ”ê°€?
MoneyNoteì—ì„œ ì§€ì¶œ ì…ë ¥ í¼ì„ ë§Œë“¤ì–´ì•¼ í•˜ëŠ”ë°, ì—¬ëŸ¬ ë¬¸ì œê°€ ìˆì—ˆì–´:
1. **ê¸ˆì•¡ ì…ë ¥**: ìˆ«ìë§Œ ë°›ê³ , ì²œë‹¨ìœ„ ì½¤ë§ˆ í¬ë§·íŒ…ì´ í•„ìš”í•¨
2. **ë‚ ì§œ ì…ë ¥**: ì˜¤ëŠ˜ ì´í›„ ë‚ ì§œëŠ” ì„ íƒ ëª»í•˜ê²Œ ì œí•œ í•„ìš”
3. **í¼ ê´€ë¦¬**: ì—¬ëŸ¬ inputì˜ ìƒíƒœë¥¼ í•˜ë‚˜ë¡œ ê´€ë¦¬í•˜ë©´ì„œ ì‹¤ì‹œê°„ ê²€ì¦ë„ í•´ì•¼ í•¨
4. **ì¬ì‚¬ìš©ì„±**: ë¹„ìŠ·í•œ inputë“¤ì„ ê³„ì† ë§Œë“¤ì–´ì•¼ í•˜ëŠ”ë° ì½”ë“œ ì¤‘ë³µì´ ì‹¬í•¨

í‘œì¤€ HTML inputìœ¼ë¡  í•œê³„ê°€ ìˆì–´ì„œ ì»¤ìŠ¤í…€ ì»´í¬ë„ŒíŠ¸ê°€ í•„ìš”í–ˆì–´.

## ğŸ› ï¸ ì–´ë–»ê²Œ í–ˆëŠ”ê°€?
1. **Controlled ë°©ì‹ ì„ íƒ**: React stateë¡œ ëª¨ë“  ì…ë ¥ê°’ ê´€ë¦¬í•´ì„œ ì‹¤ì‹œê°„ ì œì–´
2. **ì»¤ìŠ¤í…€ Input ì„¤ê³„**: CurrencyInput, DateInput ë“± ëª©ì ë³„ë¡œ íŠ¹í™”ëœ ì»´í¬ë„ŒíŠ¸ ì œì‘
3. **ì´ë²¤íŠ¸ ê°ì²´ ìˆ˜ì •**: ì»¤ìŠ¤í…€ ì»´í¬ë„ŒíŠ¸ë„ í‘œì¤€ inputì²˜ëŸ¼ ì“¸ ìˆ˜ ìˆê²Œ ê°€ì§œ ì´ë²¤íŠ¸ ê°ì²´ ìƒì„±
4. **ì‹¤ì‹œê°„ ê²€ì¦**: onChangeì—ì„œ ë°”ë¡œ ìœ íš¨ì„± ì²´í¬í•´ì„œ ì—ëŸ¬ í‘œì‹œ
5. **í¬ë§·íŒ… ë¡œì§**: ìˆ«ì ì…ë ¥ ì‹œ ìë™ìœ¼ë¡œ ì²œë‹¨ìœ„ ì½¤ë§ˆ, ë¶ˆí•„ìš”í•œ ë¬¸ì ì œê±°

## ğŸ›ï¸ Controlled vs Uncontrolled Components

### Controlled Components (ì œì–´ ì»´í¬ë„ŒíŠ¸)
React stateë¡œ ì…ë ¥ê°’ì„ ê´€ë¦¬í•˜ëŠ” ë°©ì‹. Reactê°€ "ì§„ì‹¤ì˜ ì›ì²œ(Single Source of Truth)"ì´ ë¼!

```typescript
const ControlledForm = () => {
  const [name, setName] = useState('');
  const [email, setEmail] = useState('');

  const handleSubmit = (e: React.FormEvent) => {
    e.preventDefault();
    console.log('ì œì¶œëœ ë°ì´í„°:', { name, email });
  };

  return (
    <form onSubmit={handleSubmit}>
      <input
        type="text"
        value={name}  // React stateê°€ ê°’ ê²°ì •
        onChange={(e) => setName(e.target.value)}  // Reactê°€ ë³€í™” ê°ì§€
      />
      <input
        type="email"
        value={email}
        onChange={(e) => setEmail(e.target.value)}
      />
      <button type="submit">ì œì¶œ</button>
    </form>
  );
};
```

**ì¥ì :**
- Reactê°€ ëª¨ë“  ì…ë ¥ê°’ì„ ì•Œê³  ìˆì–´ì„œ ì‹¤ì‹œê°„ ê²€ì¦ ê°€ëŠ¥
- ì¡°ê±´ë¶€ ë Œë”ë§, í¬ë§·íŒ… ë“±ì´ ì‰¬ì›Œ
- ë””ë²„ê¹…ì´ í¸í•´ (React DevToolsë¡œ state í™•ì¸ ê°€ëŠ¥)

**ë‹¨ì :**
- ì½”ë“œê°€ ì¢€ ë” ë³µì¡í•´
- ë§¤ íƒ€ì´í•‘ë§ˆë‹¤ ë¦¬ë Œë”ë§ ë°œìƒ

### Uncontrolled Components (ë¹„ì œì–´ ì»´í¬ë„ŒíŠ¸)
DOMì´ ì§ì ‘ ì…ë ¥ê°’ì„ ê´€ë¦¬í•˜ëŠ” ë°©ì‹. refë¡œ í•„ìš”í•  ë•Œë§Œ ê°’ì„ ê°€ì ¸ì™€!

```typescript
const UncontrolledForm = () => {
  const nameRef = useRef<HTMLInputElement>(null);
  const emailRef = useRef<HTMLInputElement>(null);

  const handleSubmit = (e: React.FormEvent) => {
    e.preventDefault();
    const formData = {
      name: nameRef.current?.value || '',
      email: emailRef.current?.value || ''
    };
    console.log('ì œì¶œëœ ë°ì´í„°:', formData);
  };

  return (
    <form onSubmit={handleSubmit}>
      <input
        type="text"
        ref={nameRef}
        defaultValue=""  // ì´ˆê¸°ê°’ë§Œ ì„¤ì •
      />
      <input
        type="email"
        ref={emailRef}
        defaultValue=""
      />
      <button type="submit">ì œì¶œ</button>
    </form>
  );
};
```

**ì¥ì :**
- ì½”ë“œê°€ ê°„ë‹¨í•´
- ì„±ëŠ¥ì´ ì¢‹ì•„ (ë¦¬ë Œë”ë§ ì—†ìŒ)
- ê¸°ì¡´ HTML í¼ê³¼ ë¹„ìŠ·í•´ì„œ ì´í•´í•˜ê¸° ì‰¬ì›Œ

**ë‹¨ì :**
- ì‹¤ì‹œê°„ ê²€ì¦ì´ ì–´ë ¤ì›Œ
- React ë°©ì‹ê³¼ ë§ì§€ ì•Šì•„
- ë””ë²„ê¹…ì´ ì–´ë ¤ì›Œ

### ì–¸ì œ ë­˜ ì“¸ê¹Œ?

**Controlled ì¶”ì²œ:**
- ì‹¤ì‹œê°„ ê²€ì¦ì´ í•„ìš”í•  ë•Œ
- ì…ë ¥ê°’ì— ë”°ë¼ UIê°€ ë°”ë€Œì–´ì•¼ í•  ë•Œ
- í¬ë§·íŒ…ì´ í•„ìš”í•  ë•Œ (ì „í™”ë²ˆí˜¸, ê¸ˆì•¡ ë“±)

**Uncontrolled ì¶”ì²œ:**
- ê°„ë‹¨í•œ í¼ (ì œì¶œ ì‹œì—ë§Œ ë°ì´í„° í•„ìš”)
- ì„±ëŠ¥ì´ ì¤‘ìš”í•œ ëŒ€ìš©ëŸ‰ í¼
- íŒŒì¼ ì—…ë¡œë“œ (`<input type="file" />`)

## ğŸ› ï¸ ì»¤ìŠ¤í…€ Input ì»´í¬ë„ŒíŠ¸ ì„¤ê³„

### ê¸°ë³¸ Input ì»´í¬ë„ŒíŠ¸
```typescript
import type { TextFieldProps } from '@mui/material';

interface CustomInputProps extends Omit<TextFieldProps, 'variant'> {
  label: string;
  error?: string;
  helperText?: string;
}

const CustomInput: React.FC<CustomInputProps> = ({
  label,
  error,
  helperText,
  ...muiProps
}) => {
  return (
    <TextField
      variant="outlined"
      fullWidth
      label={label}
      error={!!error}
      helperText={error || helperText}
      {...muiProps}  // ë‚˜ë¨¸ì§€ MUI props ì „ë‹¬
    />
  );
};

// ì‚¬ìš© ì˜ˆì‹œ
<CustomInput
  label="ì´ë©”ì¼"
  type="email"
  value={email}
  onChange={(e) => setEmail(e.target.value)}
  error={emailError}
  helperText="ì˜¬ë°”ë¥¸ ì´ë©”ì¼ í˜•ì‹ì„ ì…ë ¥í•˜ì„¸ìš”"
/>
```

### CurrencyInput - ê¸ˆì•¡ ì…ë ¥ ì»´í¬ë„ŒíŠ¸
```typescript
interface CurrencyInputProps extends Omit<TextFieldProps, 'onChange' | 'value'> {
  value: number;
  onChange: (value: number) => void;
  min?: number;
  max?: number;
}

const CurrencyInput: React.FC<CurrencyInputProps> = ({
  value,
  onChange,
  min = 0,
  max = Number.MAX_SAFE_INTEGER,
  ...muiProps
}) => {
  // í™”ë©´ì— í‘œì‹œí•  í¬ë§·ëœ ë¬¸ìì—´
  const [displayValue, setDisplayValue] = useState(
    value.toLocaleString()
  );

  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {
    const input = e.target.value;
    
    // ìˆ«ìì™€ ì½¤ë§ˆë§Œ í—ˆìš©
    const cleanInput = input.replace(/[^\d,]/g, '');
    
    // ì½¤ë§ˆ ì œê±°í•˜ê³  ìˆ«ìë¡œ ë³€í™˜
    const numericValue = parseInt(cleanInput.replace(/,/g, '')) || 0;
    
    // ë²”ìœ„ ì²´í¬
    const clampedValue = Math.min(Math.max(numericValue, min), max);
    
    // í¬ë§·ëœ ë¬¸ìì—´ë¡œ í™”ë©´ ì—…ë°ì´íŠ¸
    setDisplayValue(clampedValue.toLocaleString());
    
    // ë¶€ëª¨ì—ê²Œ ìˆ«ìê°’ ì „ë‹¬
    onChange(clampedValue);
  };

  // value propì´ ë³€ê²½ë˜ë©´ display ì—…ë°ì´íŠ¸
  useEffect(() => {
    setDisplayValue(value.toLocaleString());
  }, [value]);

  return (
    <TextField
      {...muiProps}
      value={displayValue}
      onChange={handleChange}
      InputProps={{
        startAdornment: <InputAdornment position="start">â‚©</InputAdornment>,
        ...muiProps.InputProps
      }}
      inputProps={{
        inputMode: 'numeric',  // ëª¨ë°”ì¼ì—ì„œ ìˆ«ì í‚¤íŒ¨ë“œ
        pattern: '[0-9,]*',    // íŒ¨í„´ ëª…ì‹œ
        ...muiProps.inputProps
      }}
    />
  );
};

// ì‚¬ìš© ì˜ˆì‹œ
const [amount, setAmount] = useState(0);

<CurrencyInput
  label="ì§€ì¶œ ê¸ˆì•¡"
  value={amount}
  onChange={setAmount}
  min={0}
  max={10000000}
/>
```

### DateInput - ë‚ ì§œ ì…ë ¥ ì»´í¬ë„ŒíŠ¸
```typescript
interface DateInputProps extends Omit<TextFieldProps, 'onChange' | 'value' | 'type'> {
  value: string; // YYYY-MM-DD í˜•ì‹
  onChange: (date: string) => void;
  minDate?: string;
  maxDate?: string;
}

const DateInput: React.FC<DateInputProps> = ({
  value,
  onChange,
  minDate,
  maxDate,
  ...muiProps
}) => {
  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {
    const newDate = e.target.value;
    
    // ë‚ ì§œ ìœ íš¨ì„± ê²€ì‚¬
    if (minDate && newDate < minDate) return;
    if (maxDate && newDate > maxDate) return;
    
    onChange(newDate);
  };

  return (
    <TextField
      {...muiProps}
      type="date"
      value={value}
      onChange={handleChange}
      InputLabelProps={{
        shrink: true,  // ë¼ë²¨ì´ í•­ìƒ ìœ„ì— ìˆë„ë¡
        ...muiProps.InputLabelProps
      }}
      inputProps={{
        min: minDate,
        max: maxDate,
        ...muiProps.inputProps
      }}
    />
  );
};

// ì‚¬ìš© ì˜ˆì‹œ
const [date, setDate] = useState(new Date().toISOString().split('T')[0]);

<DateInput
  label="ì§€ì¶œ ë‚ ì§œ"
  value={date}
  onChange={setDate}
  maxDate={new Date().toISOString().split('T')[0]} // ì˜¤ëŠ˜ê¹Œì§€ë§Œ
/>
```

## ğŸ­ ì´ë²¤íŠ¸ ê°ì²´ ìˆ˜ì • ê¸°ë²•

### ë¬¸ì œ ìƒí™©
ì»´í¬ë„ŒíŠ¸ì—ì„œ ë°›ì€ onChangeë¥¼ ê·¸ëŒ€ë¡œ ì“°ë©´ ë³µì¡í•´ì ¸:

```typescript
// ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ì—ì„œ ì´ë ‡ê²Œ ì¨ì•¼ í•¨
<CurrencyInput
  onChange={(value) => setFormData(prev => ({ ...prev, amount: value }))}
/>

<DateInput
  onChange={(date) => setFormData(prev => ({ ...prev, date }))}
/>

// ë„ˆë¬´ ë³µì¡í•´!
```

### í•´ê²°ì±…: ì´ë²¤íŠ¸ ê°ì²´ ìˆ˜ì •
ì»¤ìŠ¤í…€ ì»´í¬ë„ŒíŠ¸ì—ì„œ ì´ë²¤íŠ¸ ê°ì²´ë¥¼ ìˆ˜ì •í•´ì„œ ì¼ë°˜ inputì²˜ëŸ¼ ì“¸ ìˆ˜ ìˆê²Œ ë§Œë“¤ì–´!

```typescript
const CurrencyInput: React.FC<CurrencyInputProps> = ({
  name,
  onChange,
  ...props
}) => {
  const handleChange = (numericValue: number) => {
    // ê°€ì§œ ì´ë²¤íŠ¸ ê°ì²´ ë§Œë“¤ê¸°
    const fakeEvent = {
      target: {
        name,
        value: numericValue
      }
    } as React.ChangeEvent<HTMLInputElement>;
    
    // ë¶€ëª¨ì˜ onChangeì— ê°€ì§œ ì´ë²¤íŠ¸ ì „ë‹¬
    onChange?.(fakeEvent);
  };

  // ì‹¤ì œ êµ¬í˜„...
};

// ì´ì œ ì´ë ‡ê²Œ ì“¸ ìˆ˜ ìˆì–´!
const handleFormChange = (e: React.ChangeEvent<HTMLInputElement>) => {
  const { name, value } = e.target;
  setFormData(prev => ({ ...prev, [name]: value }));
};

<CurrencyInput
  name="amount"
  onChange={handleFormChange}  // ì¼ë°˜ inputê³¼ ë™ì¼!
/>
```

### ì‹¤ì œ êµ¬í˜„ ì˜ˆì‹œ
```typescript
interface FormInputProps {
  name: string;
  onChange: (e: React.ChangeEvent<HTMLInputElement>) => void;
}

const CurrencyInput = ({ name, onChange, ...props }: CurrencyInputProps & FormInputProps) => {
  const [displayValue, setDisplayValue] = useState('0');

  const handleInternalChange = (e: React.ChangeEvent<HTMLInputElement>) => {
    const input = e.target.value;
    const numericValue = parseInt(input.replace(/[^\d]/g, '')) || 0;
    
    setDisplayValue(numericValue.toLocaleString());
    
    // ìˆ˜ì •ëœ ì´ë²¤íŠ¸ ê°ì²´ ìƒì„±
    const modifiedEvent = {
      ...e,
      target: {
        ...e.target,
        name,
        value: numericValue  // ìˆ«ìê°’ìœ¼ë¡œ ë³€ê²½
      }
    };
    
    onChange(modifiedEvent);
  };

  return (
    <TextField
      {...props}
      value={displayValue}
      onChange={handleInternalChange}
      InputProps={{
        startAdornment: <InputAdornment position="start">â‚©</InputAdornment>
      }}
    />
  );
};
```

## ğŸ’¡ ì‹¤ì œ í”„ë¡œì íŠ¸ ì ìš© ì‚¬ë¡€

### ExpenseForm í†µí•© ì˜ˆì‹œ
```typescript
interface ExpenseFormData {
  title: string;
  amount: number;
  category: string;
  date: string;
  paymentMethod: string;
}

const ExpenseForm = () => {
  const [formData, setFormData] = useState<ExpenseFormData>({
    title: '',
    amount: 0,
    category: '',
    date: new Date().toISOString().split('T')[0],
    paymentMethod: ''
  });

  // ëª¨ë“  inputì—ì„œ ì‚¬ìš©í•  ê³µí†µ í•¸ë“¤ëŸ¬
  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {
    const { name, value } = e.target;
    setFormData(prev => ({ ...prev, [name]: value }));
  };

  return (
    <form>
      <CustomInput
        name="title"
        label="ì§€ì¶œ ì œëª©"
        value={formData.title}
        onChange={handleChange}
      />
      
      <CurrencyInput
        name="amount"
        label="ê¸ˆì•¡"
        value={formData.amount}
        onChange={handleChange}
      />
      
      <DateInput
        name="date"
        label="ë‚ ì§œ"
        value={formData.date}
        onChange={handleChange}
      />
    </form>
  );
};
```

### ì‹¤ì‹œê°„ ê²€ì¦ íŒ¨í„´
```typescript
const [errors, setErrors] = useState<Record<string, string>>({});

const validateField = (name: string, value: any) => {
  switch (name) {
    case 'title':
      return value.trim() ? '' : 'ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”';
    case 'amount':
      return value > 0 ? '' : 'ê¸ˆì•¡ì„ ì…ë ¥í•˜ì„¸ìš”';
    case 'category':
      return value ? '' : 'ì¹´í…Œê³ ë¦¬ë¥¼ ì„ íƒí•˜ì„¸ìš”';
    default:
      return '';
  }
};

const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {
  const { name, value } = e.target;
  
  // í¼ ë°ì´í„° ì—…ë°ì´íŠ¸
  setFormData(prev => ({ ...prev, [name]: value }));
  
  // ì‹¤ì‹œê°„ ê²€ì¦
  const error = validateField(name, value);
  setErrors(prev => ({ ...prev, [name]: error }));
};

// ì»´í¬ë„ŒíŠ¸ì—ì„œ ì—ëŸ¬ í‘œì‹œ
<CustomInput
  name="title"
  label="ì§€ì¶œ ì œëª©"
  value={formData.title}
  onChange={handleChange}
  error={errors.title}
/>
```

## ğŸ“ í•µì‹¬ ì •ë¦¬

### 1. Controlled vs Uncontrolled
- **Controlled**: React stateë¡œ ê´€ë¦¬, ì‹¤ì‹œê°„ ì œì–´ ê°€ëŠ¥
- **Uncontrolled**: DOMì´ ì§ì ‘ ê´€ë¦¬, ì„±ëŠ¥ ì¢‹ìŒ
- **ì„ íƒ ê¸°ì¤€**: ê¸°ëŠ¥ ìš”êµ¬ì‚¬í•­ê³¼ ì„±ëŠ¥ ê³ ë ¤

### 2. ì»¤ìŠ¤í…€ Input ì„¤ê³„ ì›ì¹™
- **ì¼ê´€ì„±**: í‘œì¤€ inputê³¼ ë¹„ìŠ·í•œ API
- **ì¬ì‚¬ìš©ì„±**: ë‹¤ì–‘í•œ ìƒí™©ì—ì„œ ì“¸ ìˆ˜ ìˆê²Œ
- **ì ‘ê·¼ì„±**: ARIA ë ˆì´ë¸”, í‚¤ë³´ë“œ ë„¤ë¹„ê²Œì´ì…˜ ê³ ë ¤

### 3. ì´ë²¤íŠ¸ ê°ì²´ ìˆ˜ì •
- **ëª©ì **: ì»¤ìŠ¤í…€ ì»´í¬ë„ŒíŠ¸ë¥¼ í‘œì¤€ inputì²˜ëŸ¼ ì‚¬ìš©
- **ë°©ë²•**: ê°€ì§œ ì´ë²¤íŠ¸ ê°ì²´ ìƒì„±í•´ì„œ ì „ë‹¬
- **ì¥ì **: í¼ ì²˜ë¦¬ ë¡œì§ í†µì¼í™” ê°€ëŠ¥

## âš ï¸ ì£¼ì˜ì‚¬í•­

### 1. ì„±ëŠ¥ ê³ ë ¤ì‚¬í•­
```typescript
// ë‚˜ìœ ì˜ˆ: ë§¤ë²ˆ ìƒˆ í•¨ìˆ˜ ìƒì„±
<input onChange={(e) => handleChange(e, 'fieldName')} />

// ì¢‹ì€ ì˜ˆ: useCallbackìœ¼ë¡œ ë©”ëª¨ì´ì œì´ì…˜
const handleFieldChange = useCallback((field: string) => 
  (e: React.ChangeEvent<HTMLInputElement>) => {
    setFormData(prev => ({ ...prev, [field]: e.target.value }));
  }, []
);
```

### 2. íƒ€ì… ì•ˆì „ì„±
```typescript
// íƒ€ì… ì•ˆì „í•œ í¼ ë°ì´í„° í•¸ë“¤ëŸ¬
const handleChange = <K extends keyof FormData>(
  field: K,
  value: FormData[K]
) => {
  setFormData(prev => ({ ...prev, [field]: value }));
};
```

### 3. ì ‘ê·¼ì„± ê³ ë ¤
```typescript
<TextField
  aria-label="ì§€ì¶œ ê¸ˆì•¡ ì…ë ¥"
  aria-describedby="amount-helper-text"
  aria-invalid={!!errors.amount}
/>
```

## ğŸš€ ë‹¤ìŒ ë‹¨ê³„
- React Hook Form ë¼ì´ë¸ŒëŸ¬ë¦¬ í™œìš©
- Yupì„ ì´ìš©í•œ ìŠ¤í‚¤ë§ˆ ê¸°ë°˜ ê²€ì¦
- ë³µí•© ì»´í¬ë„ŒíŠ¸ íŒ¨í„´ (Compound Components)