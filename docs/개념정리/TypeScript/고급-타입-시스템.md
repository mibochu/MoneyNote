# TypeScript ê³ ê¸‰ íƒ€ì… ì‹œìŠ¤í…œ ì™„ë²½ ê°€ì´ë“œ

> ì‹¤ì œ í”„ë¡œì íŠ¸ì—ì„œ ê²½í—˜í•œ TypeScript ê³ ê¸‰ íŒ¨í„´ê³¼ íƒ€ì… ì•ˆì „ì„± í™•ë³´ ë°©ë²•

## ğŸ¯ í•µì‹¬ íƒ€ì… ì‹œìŠ¤í…œ ì›ì¹™

1. **ì¤‘ì•™ì§‘ì¤‘ì‹ íƒ€ì… ê´€ë¦¬**: ëª¨ë“  íƒ€ì…ì„ í•œ ê³³ì—ì„œ ê´€ë¦¬
2. **íƒ€ì… ì•ˆì „ì„± ìš°ì„ **: ëŸ°íƒ€ì„ ì—ëŸ¬ë¥¼ ì»´íŒŒì¼ íƒ€ì„ì— ì¡ê¸°
3. **ì¸í„°í˜ì´ìŠ¤ í™•ì¥ì„±**: ë¯¸ë˜ í™•ì¥ì„ ê³ ë ¤í•œ íƒ€ì… ì„¤ê³„
4. **Barrel Export í™œìš©**: import ê²½ë¡œ ë‹¨ìˆœí™”

---

## ğŸ“ ì¤‘ì•™ì§‘ì¤‘ì‹ íƒ€ì… ê´€ë¦¬ ì•„í‚¤í…ì²˜

### âœ… ì˜¬ë°”ë¥¸ íƒ€ì… íŒŒì¼ êµ¬ì¡°

```typescript
// src/types/index.ts - ì¤‘ì•™ ì§‘ì¤‘ì‹ ê´€ë¦¬
export * from './expense.types';
export * from './category.types';  
export * from './budget.types';

// ê³µí†µ íƒ€ì…ë“¤ì€ ì—¬ê¸°ì„œ ì§ì ‘ ì •ì˜
export interface BaseEntity {
  id: string;
  createdAt: Date;
  updatedAt: Date;
}

export interface ApiResponse<T> {
  data: T;
  message?: string;
  success: boolean;
}
```

```typescript
// src/types/expense.types.ts - ë„ë©”ì¸ë³„ íƒ€ì… ë¶„ë¦¬
export interface Expense extends BaseEntity {
  description: string;
  amount: number;
  date: Date;
  category: string;
  subcategory?: string;
  paymentMethod: string;
  isFixed: boolean;
  tags: string[];
  attachments?: string[];
}

export interface ExpenseFilter {
  startDate?: Date;
  endDate?: Date;
  category?: string;
  subcategory?: string;
  paymentMethod?: string;
  tags?: string[];
  isFixed?: boolean;
}
```

### âŒ ì˜ëª»ëœ ë¶„ì‚° íƒ€ì… ê´€ë¦¬
```typescript
// âŒ ê° featureë§ˆë‹¤ íƒ€ì… íŒŒì¼ì´ ë¶„ì‚°ë¨
src/features/expenses/types/index.ts
src/features/budget/types/index.ts
src/features/category/types/index.ts

// ê²°ê³¼: import ê²½ë¡œ ë³µì¡í•´ì§, íƒ€ì… ì¤‘ë³µ ë°œìƒ
import { Expense } from '../features/expenses/types';
import { Budget } from '../features/budget/types';
```

---

## ğŸ”§ ê³ ê¸‰ íƒ€ì… íŒ¨í„´

### 1. Union Typesì™€ Discriminated Unions

```typescript
// ê¸°ë³¸ Union Type
export type SortOption = 'date-desc' | 'date-asc' | 'amount-desc' | 'amount-asc' | 'category';

// Discriminated Union (íŒë³„ ìœ ë‹ˆì˜¨)
export interface LoadingState {
  status: 'loading';
  data?: never;
  error?: never;
}

export interface SuccessState {
  status: 'success';
  data: Expense[];
  error?: never;
}

export interface ErrorState {
  status: 'error';
  data?: never;
  error: string;
}

export type AsyncState = LoadingState | SuccessState | ErrorState;

// ì‚¬ìš©ë²•
const handleState = (state: AsyncState) => {
  switch (state.status) {
    case 'loading':
      // state.dataëŠ” undefined (íƒ€ì… ì•ˆì „)
      return <LoadingSpinner />;
    case 'success':
      // state.dataëŠ” Expense[] (íƒ€ì… ì•ˆì „)
      return <ExpenseList expenses={state.data} />;
    case 'error':
      // state.errorëŠ” string (íƒ€ì… ì•ˆì „)
      return <ErrorMessage error={state.error} />;
  }
};
```

### 2. Generic Typesë¡œ ì¬ì‚¬ìš© ê°€ëŠ¥í•œ íƒ€ì…

```typescript
// í˜ì´ì§€ë„¤ì´ì…˜ì„ ìœ„í•œ ì œë„¤ë¦­ ì¸í„°í˜ì´ìŠ¤
export interface PaginatedResponse<T> {
  data: T[];
  total: number;
  page: number;
  limit: number;
  hasNext: boolean;
  hasPrev: boolean;
}

// API ì‘ë‹µì„ ìœ„í•œ ì œë„¤ë¦­ ë˜í¼
export interface ApiResponse<T> {
  data: T;
  message?: string;
  success: boolean;
}

// ì‚¬ìš© ì˜ˆì‹œ
type ExpenseListResponse = PaginatedResponse<Expense>;
type ExpenseResponse = ApiResponse<Expense>;
```

### 3. keyofì™€ typeof ì—°ì‚°ì í™œìš©

```typescript
// ê°ì²´ì˜ í‚¤ë¥¼ íƒ€ì…ìœ¼ë¡œ í™œìš©
export const PAYMENT_METHODS = {
  CARD: { label: 'ì¹´ë“œ', icon: 'ğŸ’³' },
  CASH: { label: 'í˜„ê¸ˆ', icon: 'ğŸ’µ' },
  TRANSFER: { label: 'ê³„ì¢Œì´ì²´', icon: 'ğŸ¦' },
  DIGITAL: { label: 'ë””ì§€í„¸ì§€ê°‘', icon: 'ğŸ“±' }
} as const;

// keyof typeofë¡œ ì•ˆì „í•œ í‚¤ íƒ€ì… ìƒì„±
export type PaymentMethodKey = keyof typeof PAYMENT_METHODS;
// ê²°ê³¼: 'CARD' | 'CASH' | 'TRANSFER' | 'DIGITAL'

// ì»´í¬ë„ŒíŠ¸ì—ì„œ ì‚¬ìš©
interface Props {
  paymentMethod: PaymentMethodKey;
}

const PaymentIcon: React.FC<Props> = ({ paymentMethod }) => {
  // íƒ€ì… ì•ˆì „í•˜ê²Œ ì ‘ê·¼ ê°€ëŠ¥
  const method = PAYMENT_METHODS[paymentMethod];
  return <span>{method.icon} {method.label}</span>;
};
```

### 4. Conditional Typesë¡œ íƒ€ì… ì¶”ë¡ 

```typescript
// ì¡°ê±´ë¶€ íƒ€ì…ìœ¼ë¡œ ë” ì •í™•í•œ íƒ€ì… ì¶”ë¡ 
export type FilterValue<T> = T extends Date ? Date 
  : T extends number ? number 
  : T extends boolean ? boolean 
  : string;

// í•„í„° ê°ì²´ì˜ ê°’ íƒ€ì…ì„ ìë™ ì¶”ë¡ 
export interface SmartFilter {
  startDate?: FilterValue<Date>;     // Date
  amount?: FilterValue<number>;      // number  
  isFixed?: FilterValue<boolean>;    // boolean
  category?: FilterValue<string>;    // string
}
```

---

## ğŸ›¡ï¸ íƒ€ì… ì•ˆì „ì„± í™•ë³´ ë°©ë²•

### 1. íƒ€ì… ê°€ë“œ (Type Guards)

```typescript
// ì‚¬ìš©ì ì •ì˜ íƒ€ì… ê°€ë“œ
export const isExpense = (obj: any): obj is Expense => {
  return obj &&
    typeof obj.id === 'string' &&
    typeof obj.description === 'string' &&
    typeof obj.amount === 'number' &&
    obj.date instanceof Date;
};

// ì‚¬ìš© ì˜ˆì‹œ
const handleUnknownData = (data: unknown) => {
  if (isExpense(data)) {
    // ì—¬ê¸°ì„œ dataëŠ” Expense íƒ€ì…ìœ¼ë¡œ ì¶”ë¡ ë¨
    console.log(data.description); // íƒ€ì… ì•ˆì „
  }
};
```

### 2. Assertion Functionsë¡œ ëŸ°íƒ€ì„ ê²€ì¦

```typescript
// assertion function ì •ì˜
export function assertIsExpense(obj: any): asserts obj is Expense {
  if (!isExpense(obj)) {
    throw new Error('Invalid expense object');
  }
}

// ì‚¬ìš© ì˜ˆì‹œ
const processExpenseData = (data: unknown) => {
  assertIsExpense(data);
  // ì´ì œ dataëŠ” Expense íƒ€ì…ìœ¼ë¡œ í™•ì •
  return data.amount * 1.1; // íƒ€ì… ì•ˆì „
};
```

### 3. ë¸Œëœë””ë“œ íƒ€ì…ìœ¼ë¡œ ì—„ê²©í•œ êµ¬ë¶„

```typescript
// ID íƒ€ì…ë“¤ì„ ì—„ê²©í•˜ê²Œ êµ¬ë¶„
export type ExpenseId = string & { __brand: 'ExpenseId' };
export type CategoryId = string & { __brand: 'CategoryId' };

// ìƒì„± í•¨ìˆ˜ë“¤
export const createExpenseId = (id: string): ExpenseId => id as ExpenseId;
export const createCategoryId = (id: string): CategoryId => id as CategoryId;

// ì‚¬ìš© ì‹œ ì˜ëª»ëœ ID íƒ€ì… í˜¼ìš© ë°©ì§€
const getExpense = (id: ExpenseId): Expense => { /* ... */ };
const getCategory = (id: CategoryId): Category => { /* ... */ };

// ì»´íŒŒì¼ ì—ëŸ¬ ë°œìƒìœ¼ë¡œ ì‹¤ìˆ˜ ë°©ì§€
const expenseId = createExpenseId('exp-123');
const categoryId = createCategoryId('cat-456');

getExpense(categoryId); // âŒ ì»´íŒŒì¼ ì—ëŸ¬!
getCategory(expenseId); // âŒ ì»´íŒŒì¼ ì—ëŸ¬!
```

---

## ğŸ”„ íƒ€ì… í˜¸í™˜ì„±ê³¼ ë§ˆì´ê·¸ë ˆì´ì…˜

### 1. ì ì§„ì  ë§ˆì´ê·¸ë ˆì´ì…˜ ì „ëµ

```typescript
// 1ë‹¨ê³„: ê¸°ì¡´ íƒ€ì…ì— ìƒˆ í•„ë“œ ì¶”ê°€ (ì„ íƒì ìœ¼ë¡œ)
export interface Expense {
  id: string;
  description: string;
  amount: number;
  date: Date;
  
  // ìƒˆë¡œ ì¶”ê°€ëœ í•„ë“œë“¤ (ì„ íƒì ìœ¼ë¡œ ì‹œì‘)
  category?: string;
  subcategory?: string;
  tags?: string[];
}

// 2ë‹¨ê³„: í•„ìˆ˜ í•„ë“œë¡œ ì „í™˜ + ê¸°ë³¸ê°’ ì œê³µ
export interface Expense {
  id: string;
  description: string;
  amount: number;
  date: Date;
  category: string;
  subcategory: string | null; // null í—ˆìš©ìœ¼ë¡œ í˜¸í™˜ì„± ìœ ì§€
  tags: string[]; // ë¹ˆ ë°°ì—´ì„ ê¸°ë³¸ê°’ìœ¼ë¡œ
}
```

### 2. í˜¸í™˜ì„±ì„ ìœ„í•œ íƒ€ì… ë³€í™˜

```typescript
// êµ¬ë²„ì „ íƒ€ì…
interface LegacyExpense {
  id: string;
  desc: string; // description â†’ desc
  value: number; // amount â†’ value  
}

// ì‹ ë²„ì „ íƒ€ì…  
interface Expense {
  id: string;
  description: string;
  amount: number;
}

// ë³€í™˜ í•¨ìˆ˜ì™€ íƒ€ì… ì •ì˜
export const migrateLegacyExpense = (legacy: LegacyExpense): Expense => ({
  id: legacy.id,
  description: legacy.desc,
  amount: legacy.value
});

// íƒ€ì… í˜¸í™˜ì„± ìœ í‹¸ë¦¬í‹°
export type Compatible<T, U> = T extends U ? T : never;
```

---

## ğŸ“Š ì‹¤ì „ íƒ€ì… ì—ëŸ¬ í•´ê²° ì‚¬ë¡€

### Before: ì»´íŒŒì¼ ì—ëŸ¬ ë°œìƒ ìƒí™©ë“¤
```typescript
// âŒ Property 'subcategory' does not exist on type 'ExpenseFilter'
const filter: ExpenseFilter = {
  startDate: new Date(),
  subcategory: 'food' // ì—†ëŠ” í•„ë“œ
};

// âŒ Cannot find module '../features/expenses/types'  
import { ExpenseStats } from '../features/expenses/types';

// âŒ Type 'string' is not assignable to type 'PaymentMethod'
const payment: PaymentMethod = 'card'; // ì˜ëª»ëœ ê°’
```

### After: íƒ€ì… ì•ˆì „ì„± í™•ë³´
```typescript
// âœ… ì¤‘ì•™ì§‘ì¤‘ì‹ íƒ€ì…ìœ¼ë¡œ í•´ê²°
import { ExpenseFilter, ExpenseStats } from '../types';

// âœ… ì¸í„°í˜ì´ìŠ¤ì— í•„ë“œ ì¶”ê°€
export interface ExpenseFilter {
  startDate?: Date;
  endDate?: Date;
  category?: string;
  subcategory?: string; // âœ… ì¶”ê°€ë¨
  paymentMethod?: string;
  tags?: string[];
  isFixed?: boolean;
}

// âœ… ìƒìˆ˜ ê¸°ë°˜ íƒ€ì…ìœ¼ë¡œ í•´ê²°
export type PaymentMethod = keyof typeof PAYMENT_METHODS;
const payment: PaymentMethod = 'CARD'; // âœ… ì˜¬ë°”ë¥¸ ê°’
```

---

## âš¡ TypeScript ì„±ëŠ¥ ìµœì í™”

### 1. ì»´íŒŒì¼ íƒ€ì„ ìµœì í™”

```typescript
// âœ… êµ¬ì²´ì ì¸ íƒ€ì…ìœ¼ë¡œ ì¶”ë¡  ìµœì í™”
export interface SpecificExpenseFilter {
  dateRange?: 'thisMonth' | 'lastMonth' | 'thisYear' | 'custom';
  amountRange?: 'under10k' | '10k-50k' | '50k-100k' | 'over100k';
  category?: 'food' | 'transport' | 'shopping' | 'utility';
}

// âŒ anyë‚˜ object ê°™ì€ ê´‘ë²”ìœ„í•œ íƒ€ì…ì€ í”¼í•˜ê¸°
export interface VagueFilter {
  data?: any; // ì¶”ë¡ ì´ ì–´ë ¤ì›Œ ì„±ëŠ¥ ì €í•˜
  config?: object; // êµ¬ì²´ì ì´ì§€ ì•ŠìŒ
}
```

### 2. íƒ€ì… ìºì‹±ê³¼ ì¬ì‚¬ìš©

```typescript
// ìì£¼ ì‚¬ìš©ë˜ëŠ” íƒ€ì…ë“¤ì„ ë¯¸ë¦¬ ì •ì˜
export type ExpenseWithStats = Expense & {
  monthlyRank?: number;
  categoryPercent?: number;
  isHighAmount?: boolean;
};

// Utility Types ì ê·¹ í™œìš©
export type PartialExpense = Partial<Expense>;
export type RequiredExpenseFilter = Required<ExpenseFilter>;
export type ExpenseKeys = keyof Expense;
```

---

## ğŸ”— íƒ€ì… ì‹œìŠ¤í…œ ì²´í¬ë¦¬ìŠ¤íŠ¸

### âœ… ì˜ ì„¤ê³„ëœ íƒ€ì… ì‹œìŠ¤í…œì˜ íŠ¹ì§•
- [ ] ì¤‘ì•™ì§‘ì¤‘ì‹ íƒ€ì… ê´€ë¦¬ (`src/types/index.ts`)
- [ ] ë„ë©”ì¸ë³„ íƒ€ì… íŒŒì¼ ë¶„ë¦¬
- [ ] Barrel Exportë¡œ import ê²½ë¡œ ë‹¨ìˆœí™”
- [ ] ë¸Œëœë””ë“œ íƒ€ì…ìœ¼ë¡œ ID í˜¼ìš© ë°©ì§€
- [ ] íƒ€ì… ê°€ë“œì™€ assertionìœ¼ë¡œ ëŸ°íƒ€ì„ ì•ˆì „ì„±
- [ ] Genericê³¼ Utility Types í™œìš©
- [ ] ì ì§„ì  ë§ˆì´ê·¸ë ˆì´ì…˜ ì „ëµ

### âŒ ë¦¬íŒ©í† ë§ì´ í•„ìš”í•œ ì‹ í˜¸ë“¤
- [ ] import ê²½ë¡œê°€ ë³µì¡í•¨ (`../../../features/...`)
- [ ] ê°™ì€ íƒ€ì…ì„ ì—¬ëŸ¬ ê³³ì—ì„œ ì •ì˜
- [ ] anyë‚˜ object íƒ€ì… ë‚¨ë°œ
- [ ] ëŸ°íƒ€ì„ì—ì„œ íƒ€ì… ì—ëŸ¬ ë°œìƒ
- [ ] íƒ€ì… ì—ëŸ¬ í•´ê²°ì„ ìœ„í•œ ì–µì§€ ìºìŠ¤íŒ…
- [ ] ì»´íŒŒì¼ ì†ë„ê°€ í˜„ì €íˆ ëŠë¦¼

---

## ğŸ“ˆ ë§ˆì´ê·¸ë ˆì´ì…˜ ì„±ê³¼

### Before: ë¶„ì‚° íƒ€ì… ê´€ë¦¬ ì‹œì ˆ
```
- ì»´íŒŒì¼ ì—ëŸ¬: 25+ ê°œ
- import ê²½ë¡œ: ../features/expenses/types
- íƒ€ì… ì¤‘ë³µ: 3-4ê³³ì—ì„œ ê°™ì€ íƒ€ì… ì •ì˜
- ê°œë°œ ì†ë„: ëŠë¦¼ (íƒ€ì… ì—ëŸ¬ í•´ê²°ì— ì‹œê°„ ì†Œëª¨)
```

### After: ì¤‘ì•™ì§‘ì¤‘ì‹ íƒ€ì… ê´€ë¦¬
```
- ì»´íŒŒì¼ ì—ëŸ¬: 0ê°œ (ëª¨ë“  ì—ëŸ¬ í•´ê²°!)
- import ê²½ë¡œ: ../types (ë‹¨ìˆœëª…ë£Œ)
- íƒ€ì… ì¼ê´€ì„±: ë‹¨ì¼ ì†ŒìŠ¤ë¡œ ì¤‘ë³µ ì œê±°
- ê°œë°œ ì†ë„: ë¹ ë¦„ (íƒ€ì… ì•ˆì „ì„± í™•ë³´)
```

---

## ğŸ”— ê´€ë ¨ ìë£Œ

### ì‹¤ì „ ì‚¬ë¡€
- **íƒ€ì… ì¤‘ì•™í™” êµ¬í˜„** â†’ [2025-08-06 í•™ìŠµìƒì„¸](../í•™ìŠµìƒì„¸/2025-08-06/03-íƒ€ì…ì‹œìŠ¤í…œ-ì¤‘ì•™ì§‘ì¤‘í™”.md)
- **ì»´íŒŒì¼ ì—ëŸ¬ í•´ê²°** â†’ [2025-08-06 í•™ìŠµìƒì„¸](../í•™ìŠµìƒì„¸/2025-08-06/04-TypeScript-ì»´íŒŒì¼-ì—ëŸ¬-í•´ê²°.md)

### ì‹¬í™” í•™ìŠµ
- [TypeScript ê³µì‹ë¬¸ì„œ: Advanced Types](https://www.typescriptlang.org/docs/handbook/advanced-types.html)
- [TypeScript ê³µì‹ë¬¸ì„œ: Utility Types](https://www.typescriptlang.org/docs/handbook/utility-types.html)

**ğŸ’¡ í•µì‹¬**: íƒ€ì…ì€ ì½”ë“œì˜ ê³„ì•½ì„œë‹¤. ëª…í™•í•˜ê³  ì•ˆì „í•œ ê³„ì•½ì„ ë§ºì–´ ëŸ°íƒ€ì„ ì—ëŸ¬ë¥¼ ì‚¬ì „ì— ë°©ì§€í•˜ì!