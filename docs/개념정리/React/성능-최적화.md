# React ì„±ëŠ¥ ìµœì í™” ì‹¤ì „ ê°€ì´ë“œ

> ì‹¤ì œ í”„ë¡œì íŠ¸ì—ì„œ ê²½í—˜í•œ ì„±ëŠ¥ ë¬¸ì œì™€ í•´ê²°ë²•ë“¤

## ğŸ¯ í•µì‹¬ ì„±ëŠ¥ ìµœì í™” ì „ëµ

1. **ì¸¡ì • ë¨¼ì €, ìµœì í™”ëŠ” ë‚˜ì¤‘ì—**
2. **useMemoëŠ” ë¹„ì‹¼ ê³„ì‚°ì—ë§Œ**  
3. **useCallbackì€ ìì‹ propsë‚˜ ì˜ì¡´ì„±ì—ë§Œ**
4. **ì¡°ê±´ë¶€ ë Œë”ë§ìœ¼ë¡œ DOM ìµœì†Œí™”**
5. **í˜ì´ì§€ë„¤ì´ì…˜ìœ¼ë¡œ ëŒ€ìš©ëŸ‰ ë°ì´í„° ì²˜ë¦¬**

---

## ğŸ“Š useMemo í™œìš©ë²•

### âœ… ì–¸ì œ ì‚¬ìš©í•˜ë‚˜?
- ë³µì¡í•œ ê³„ì‚° (ë°°ì—´ í•„í„°ë§, ì •ë ¬, reduce)
- ë Œë”ë§í•  ë•Œë§ˆë‹¤ ë°˜ë³µë˜ëŠ” ë¹„ì‹¼ ì—°ì‚°
- ì˜ì¡´ì„±ì´ ìì£¼ ë°”ë€Œì§€ ì•ŠëŠ” ê³„ì‚°

```typescript
// âœ… ì¢‹ì€ useMemo ì‚¬ìš© ì˜ˆì‹œ
const ExpenseList = ({ expenses, filter }) => {
  // ë³µì¡í•œ í•„í„°ë§ ë¡œì§ - ë©”ëª¨ì´ì œì´ì…˜ í•„ìš”!
  const filteredExpenses = useMemo(() => {
    console.log('í•„í„°ë§ ê³„ì‚° ì‹œì‘'); // í•„ìš”í•  ë•Œë§Œ ì‹¤í–‰ë¨
    
    let result = [...expenses];
    
    if (filter.startDate) {
      result = result.filter(exp => exp.date >= filter.startDate);
    }
    
    if (filter.category) {
      result = result.filter(exp => exp.category === filter.category);
    }
    
    return result;
  }, [expenses, filter]); // expensesë‚˜ filterê°€ ë°”ë€” ë•Œë§Œ ì¬ê³„ì‚°

  // í†µê³„ ê³„ì‚°ë„ ë©”ëª¨ì´ì œì´ì…˜
  const stats = useMemo(() => {
    const total = filteredExpenses.reduce((sum, exp) => sum + exp.amount, 0);
    const count = filteredExpenses.length;
    const average = count > 0 ? total / count : 0;
    
    return { total, count, average };
  }, [filteredExpenses]);

  return <div>{/* UI ë Œë”ë§ */}</div>;
};
```

### âŒ ë¶ˆí•„ìš”í•œ useMemo
```typescript
// âŒ ê°„ë‹¨í•œ ê³„ì‚°ì€ ë©”ëª¨ì´ì œì´ì…˜ ë¶ˆí•„ìš”
const SimpleComponent = ({ a, b }) => {
  const sum = useMemo(() => a + b, [a, b]); // ë¶ˆí•„ìš”!
  const isPositive = useMemo(() => sum > 0, [sum]); // ë¶ˆí•„ìš”!
  
  // ê·¸ëƒ¥ ì´ë ‡ê²Œ í•˜ë©´ ë¨
  const sum = a + b;
  const isPositive = sum > 0;
};
```

---

## ğŸ”„ useCallback í™œìš©ë²•

### âœ… ì–¸ì œ ì‚¬ìš©í•˜ë‚˜?
- ìì‹ ì»´í¬ë„ŒíŠ¸ì— propsë¡œ ì „ë‹¬í•˜ëŠ” í•¨ìˆ˜
- ë‹¤ë¥¸ í›…ì˜ ì˜ì¡´ì„±ì— ì‚¬ìš©ë˜ëŠ” í•¨ìˆ˜
- ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ê°€ ìì£¼ ì¬ìƒì„±ë˜ëŠ” ê²½ìš°

```typescript
// âœ… ì¢‹ì€ useCallback ì‚¬ìš© ì˜ˆì‹œ
const ExpenseList = ({ expenses, onExpenseUpdate }) => {
  const [sortBy, setSortBy] = useState('date');
  const [currentPage, setCurrentPage] = useState(1);

  // ìì‹ì—ê²Œ ì „ë‹¬í•˜ëŠ” í•¨ìˆ˜ - ë©”ëª¨ì´ì œì´ì…˜ í•„ìš”!
  const handleSort = useCallback((newSortBy) => {
    setSortBy(newSortBy);
    setCurrentPage(1); // ì •ë ¬ ë³€ê²½ ì‹œ ì²« í˜ì´ì§€ë¡œ
  }, []); // sortBy, currentPageëŠ” setterì´ë¯€ë¡œ ì˜ì¡´ì„± ë¶ˆí•„ìš”

  // ë‹¤ë¥¸ í›…ì˜ ì˜ì¡´ì„±ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” í•¨ìˆ˜
  const fetchData = useCallback(async () => {
    const data = await api.getExpenses();
    onExpenseUpdate(data);
  }, [onExpenseUpdate]);

  useEffect(() => {
    fetchData(); // fetchDataê°€ useCallbackìœ¼ë¡œ ê°ì‹¸ì ¸ ìˆì–´ì•¼ í•¨
  }, [fetchData]);

  return (
    <div>
      {expenses.map(expense => (
        <ExpenseItem 
          key={expense.id}
          expense={expense}
          onSort={handleSort} // ë©”ëª¨ì´ì œì´ì…˜ëœ í•¨ìˆ˜ ì „ë‹¬
        />
      ))}
    </div>
  );
};
```

---

## ğŸ¨ ì¡°ê±´ë¶€ ë Œë”ë§ ìµœì í™”

### âœ… DOM í¬ê¸° ìµœì†Œí™”
```typescript
const ExpenseList = ({ showFilters, isLoading, error, expenses }) => {
  // ë¡œë”© ì¤‘ì´ë©´ ë‹¤ë¥¸ ê²ƒë“¤ ë Œë”ë§í•˜ì§€ ì•ŠìŒ
  if (isLoading) {
    return <CircularProgress />;
  }

  // ì—ëŸ¬ê°€ ìˆìœ¼ë©´ ì—ëŸ¬ë§Œ ë³´ì—¬ì¤Œ
  if (error) {
    return <Alert severity="error">{error}</Alert>;
  }

  return (
    <Box>
      {/* í•„í„°ëŠ” ì—´ë ¤ìˆì„ ë•Œë§Œ ë Œë”ë§ */}
      {showFilters && (
        <Paper sx={{ p: 2 }}>
          {/* ë³µì¡í•œ í•„í„° UIë“¤... */}
        </Paper>
      )}
      
      {/* ë°ì´í„°ê°€ ìˆì„ ë•Œë§Œ ëª©ë¡ ë Œë”ë§ */}
      {expenses.length > 0 ? (
        <ExpenseList expenses={expenses} />
      ) : (
        <EmptyState message="ì§€ì¶œ ë‚´ì—­ì´ ì—†ìŠµë‹ˆë‹¤" />
      )}
    </Box>
  );
};
```

---

## ğŸ“„ í˜ì´ì§€ë„¤ì´ì…˜ìœ¼ë¡œ ì„±ëŠ¥ ê°œì„ 

### ğŸ¤” ì–¸ì œ í•„ìš”í•œê°€?
- 100ê°œ ì´ìƒì˜ ì•„ì´í…œì„ í‘œì‹œí•  ë•Œ
- ë¬´í•œ ìŠ¤í¬ë¡¤ë³´ë‹¤ í˜ì´ì§€ ë‹¨ìœ„ íƒìƒ‰ì´ ì¢‹ì„ ë•Œ
- ê²€ìƒ‰/í•„í„°ë§ê³¼ í•¨ê»˜ ì‚¬ìš©í•  ë•Œ

```typescript
const ExpenseList = ({ expenses, pageSize = 10 }) => {
  const [currentPage, setCurrentPage] = useState(1);

  // ì „ì²´ ë°ì´í„°ì—ì„œ í˜„ì¬ í˜ì´ì§€ ë¶„ë§Œ ê³„ì‚°
  const totalPages = Math.ceil(expenses.length / pageSize);
  const startIndex = (currentPage - 1) * pageSize;
  const currentExpenses = expenses.slice(startIndex, startIndex + pageSize);

  return (
    <Box>
      {/* 10ê°œì”©ë§Œ DOMì— ë Œë”ë§! */}
      <Stack spacing={1}>
        {currentExpenses.map(expense => (
          <ExpenseItem key={expense.id} expense={expense} />
        ))}
      </Stack>

      {/* í˜ì´ì§€ë„¤ì´ì…˜ UI */}
      {totalPages > 1 && (
        <Pagination 
          count={totalPages}
          page={currentPage}
          onChange={(_, page) => setCurrentPage(page)}
        />
      )}
    </Box>
  );
};
```

---

## ğŸ” ì„±ëŠ¥ ì¸¡ì • ë°©ë²•

### React DevTools Profiler ì‚¬ìš©í•˜ê¸°
```typescript
// 1. React DevTools ì„¤ì¹˜
// 2. Profiler íƒ­ì—ì„œ ë…¹í™” ì‹œì‘
// 3. ì•± ì¡°ì‘ (í•„í„° ë³€ê²½, ì •ë ¬ ë“±)
// 4. ë…¹í™” ì¤‘ì§€ í›„ ë¶„ì„

// ì„±ëŠ¥ ì¸¡ì •ìš© ì½”ë“œë„ ì¶”ê°€
const ExpenseList = ({ expenses }) => {
  const filteredExpenses = useMemo(() => {
    const start = performance.now();
    const result = expenses.filter(/* ë³µì¡í•œ ë¡œì§ */);
    console.log(`í•„í„°ë§ ì‹œê°„: ${performance.now() - start}ms`);
    return result;
  }, [expenses]);
};
```

### Chrome DevTools í™œìš©
```javascript
// Performance íƒ­ì—ì„œ ì„±ëŠ¥ ë¶„ì„
// 1. Performance íƒ­ ì—´ê¸°
// 2. ë…¹í™” ì‹œì‘ (ë¹¨ê°„ ì› ë²„íŠ¼)
// 3. ì•±ì—ì„œ ëŠë¦° ì‘ì—… ìˆ˜í–‰
// 4. ë…¹í™” ì¤‘ì§€
// 5. ê¸´ Taskë“¤ ì°¾ì•„ì„œ ë¶„ì„

// ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ë„ ì²´í¬
// Memory íƒ­ì—ì„œ í™ ìŠ¤ëƒ…ìƒ· ë¹„êµ
```

---

## âš¡ ì„±ëŠ¥ ìµœì í™” ì²´í¬ë¦¬ìŠ¤íŠ¸

### ğŸ¯ ìš°ì„ ìˆœìœ„ë³„ ìµœì í™”

**1ìˆœìœ„: ê°€ì¥ íš¨ê³¼ì **
- [ ] í˜ì´ì§€ë„¤ì´ì…˜/ë¬´í•œìŠ¤í¬ë¡¤ ë„ì…
- [ ] ì¡°ê±´ë¶€ ë Œë”ë§ìœ¼ë¡œ ë¶ˆí•„ìš”í•œ DOM ì œê±°
- [ ] ì´ë¯¸ì§€ lazy loading

**2ìˆœìœ„: ê³„ì‚°ì´ ë³µì¡í•  ë•Œ**
- [ ] useMemoë¡œ ë¹„ì‹¼ ê³„ì‚° ë©”ëª¨ì´ì œì´ì…˜
- [ ] í•„í„°ë§/ì •ë ¬ ë¡œì§ ìµœì í™”

**3ìˆœìœ„: ë¦¬ë Œë”ë§ì´ ë§ì„ ë•Œ** 
- [ ] useCallbackìœ¼ë¡œ í•¨ìˆ˜ ë©”ëª¨ì´ì œì´ì…˜
- [ ] React.memoë¡œ ì»´í¬ë„ŒíŠ¸ ë©”ëª¨ì´ì œì´ì…˜

### ğŸš¨ ê³¼ìµœì í™” ì£¼ì˜ì‚¬í•­

```typescript
// âŒ ì´ëŸ° ê±´ í•˜ì§€ ë§ˆì„¸ìš”
const OverOptimized = ({ name, age }) => {
  // ê°„ë‹¨í•œ ë¬¸ìì—´ ì¡°ì‘ì„ ë©”ëª¨ì´ì œì´ì…˜ (ë¶ˆí•„ìš”!)
  const greeting = useMemo(() => `ì•ˆë…•í•˜ì„¸ìš”, ${name}ë‹˜!`, [name]);
  
  // ê°„ë‹¨í•œ ê³„ì‚°ì„ ë©”ëª¨ì´ì œì´ì…˜ (ë¶ˆí•„ìš”!)
  const isAdult = useMemo(() => age >= 18, [age]);
  
  // ë¡œì»¬ì—ì„œë§Œ ì“°ëŠ” í•¨ìˆ˜ë¥¼ ë©”ëª¨ì´ì œì´ì…˜ (ë¶ˆí•„ìš”!)
  const handleClick = useCallback(() => {
    console.log('clicked');
  }, []);

  return <div>{greeting}</div>;
};

// âœ… ì´ë ‡ê²Œ í•˜ì„¸ìš”
const SimpleComponent = ({ name, age }) => {
  const greeting = `ì•ˆë…•í•˜ì„¸ìš”, ${name}ë‹˜!`;
  const isAdult = age >= 18;
  const handleClick = () => console.log('clicked');

  return <div>{greeting}</div>;
};
```

---

## ğŸ“Š ì‹¤ì œ ì„±ëŠ¥ ê°œì„  ì‚¬ë¡€

### Before: ìµœì í™” ì „ ExpenseList
```
- 1000ê°œ ì§€ì¶œ ë°ì´í„° ë¡œë”©: 3ì´ˆ
- í•„í„° ë³€ê²½ ì‹œ ì‘ë‹µ: 1.5ì´ˆ  
- ì •ë ¬ ë³€ê²½ ì‹œ ì‘ë‹µ: 1.2ì´ˆ
- ìŠ¤í¬ë¡¤: ë²„ë²…ê±°ë¦¼
```

### After: ìµœì í™” í›„ ExpenseList
```
- 1000ê°œ ì§€ì¶œ ë°ì´í„° ë¡œë”©: 0.5ì´ˆ (6ë°° ê°œì„ !)
- í•„í„° ë³€ê²½ ì‹œ ì‘ë‹µ: 0.2ì´ˆ (7.5ë°° ê°œì„ !)
- ì •ë ¬ ë³€ê²½ ì‹œ ì‘ë‹µ: 0.1ì´ˆ (12ë°° ê°œì„ !)
- ìŠ¤í¬ë¡¤: ë¶€ë“œëŸ¬ì›€
```

### ì ìš©í•œ ìµœì í™” ê¸°ë²•
1. **í˜ì´ì§€ë„¤ì´ì…˜**: 1000ê°œ â†’ 10ê°œì”©ë§Œ ë Œë”ë§
2. **useMemo**: í•„í„°ë§/ì •ë ¬/í†µê³„ ê³„ì‚° ë©”ëª¨ì´ì œì´ì…˜  
3. **ì¡°ê±´ë¶€ ë Œë”ë§**: í•„í„° UIëŠ” í•„ìš”í•  ë•Œë§Œ ë Œë”ë§
4. **useCallback**: ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ë©”ëª¨ì´ì œì´ì…˜

---

## ğŸ”— ê´€ë ¨ ìë£Œ

- **ì‹¤ì „ ì‚¬ë¡€** â†’ [2025-08-06 ì„±ëŠ¥ ìµœì í™”](../í•™ìŠµìƒì„¸/2025-08-06/02-React-ì„±ëŠ¥-ìµœì í™”-ì‹¤ì „-ì ìš©.md)
- [React ê³µì‹ë¬¸ì„œ: Optimizing Performance](https://react.dev/reference/react)
- [Kent C. Dodds: When to useMemo and useCallback](https://kentcdodds.com/blog/usememo-and-usecallback)

**ğŸ’¡ í•µì‹¬**: ì¸¡ì •ë¶€í„° í•˜ê³ , ì •ë§ í•„ìš”í•œ ê³³ì—ë§Œ ìµœì í™”ë¥¼ ì ìš©í•˜ì!