# MoneyNote ì˜¤ë¥˜ ì²˜ë¦¬ íŒ¨í„´ ì™„ë²½ ê°€ì´ë“œ

> MoneyNote í”„ë¡œì íŠ¸ì—ì„œ ì‹¤ì œ ë°œìƒí•œ ì˜¤ë¥˜ë“¤ê³¼ ì²´ê³„ì ì¸ í•´ê²° íŒ¨í„´ ëª¨ìŒì§‘

## ğŸ¯ ì´ ë¬¸ì„œì˜ ëª©ì 

- **ìì£¼ ë°œìƒí•˜ëŠ” ì˜¤ë¥˜ íŒ¨í„´** ì‚¬ì „ íŒŒì•… ë° ì˜ˆë°©
- **ì²´ê³„ì ì¸ ì—ëŸ¬ í•¸ë“¤ë§** ì „ëµ ìˆ˜ë¦½
- **ì‚¬ìš©ì ê²½í—˜ ìµœì í™”**ë¥¼ ìœ„í•œ ì˜¤ë¥˜ ì²˜ë¦¬ ì„¤ê³„
- **ë°©ì–´ì  í”„ë¡œê·¸ë˜ë°** íŒ¨í„´ ë§ˆìŠ¤í„°

---

## ğŸ“Š MoneyNoteì—ì„œ ë°œê²¬ëœ ì£¼ìš” ì˜¤ë¥˜ íŒ¨í„´

### ğŸ”´ **Level 1: ì¹˜ëª…ì  ì˜¤ë¥˜** (ì•±ì´ ì¤‘ë‹¨ë¨)

#### 1.1 Context Provider ëˆ„ë½ ì˜¤ë¥˜
```typescript
// âŒ ë¬¸ì œ ìƒí™©
const Dashboard = () => {
  const expenseContext = useContext(ExpenseContext);
  // expenseContextê°€ undefinedì¸ ìƒí™© ë°œìƒ
};

// âœ… í•´ê²° íŒ¨í„´
export const useExpenses = () => {
  const context = useContext(ExpenseContext);
  if (context === undefined) {
    throw new Error('useExpenses must be used within an ExpenseProvider');
  }
  return context;
};

// ì‚¬ìš©ìì—ê²Œ í‘œì‹œë˜ëŠ” ë©”ì‹œì§€
if (!expenseContext) {
  throw new Error('Dashboard must be used within ExpenseProvider');
}
```

**ë°œìƒ ë¹ˆë„**: ğŸ”¥ğŸ”¥ğŸ”¥ (ë§¤ìš° ë†’ìŒ)  
**ì˜í–¥ë„**: ì•± ì „ì²´ ì¤‘ë‹¨  
**í•´ê²°ì±…**: ëª¨ë“  ì»¤ìŠ¤í…€ í›…ì— undefined ì²´í¬ í•„ìˆ˜

#### 1.2 localStorage ì ‘ê·¼ ê¶Œí•œ ì˜¤ë¥˜
```typescript
// âŒ ë¬¸ì œ ìƒí™©: ë¸Œë¼ìš°ì € ì„¤ì •ìœ¼ë¡œ localStorage ë¹„í™œì„±í™”
localStorage.setItem('key', 'value'); // DOMException ë°œìƒ

// âœ… í•´ê²° íŒ¨í„´
export class LocalStorage {
  static set<T>(key: keyof typeof STORAGE_KEYS, data: T): boolean {
    try {
      const jsonData = JSON.stringify(data);
      localStorage.setItem(STORAGE_KEYS[key], jsonData);
      return true;
    } catch (error) {
      console.error(`Failed to save to localStorage:`, error);
      return false; // í˜¸ì¶œìê°€ ì‹¤íŒ¨ë¥¼ ì•Œ ìˆ˜ ìˆê²Œ
    }
  }
  
  static get<T>(key: keyof typeof STORAGE_KEYS, defaultValue: T): T {
    try {
      const item = localStorage.getItem(STORAGE_KEYS[key]);
      if (!item) return defaultValue;
      
      return JSON.parse(item) as T;
    } catch (error) {
      console.error(`Failed to read from localStorage:`, error);
      return defaultValue; // ê¸°ë³¸ê°’ìœ¼ë¡œ graceful fallback
    }
  }
}
```

**ë°œìƒ ë¹ˆë„**: ğŸ”¥ğŸ”¥ (ë†’ìŒ)  
**ì˜í–¥ë„**: ë°ì´í„° ì €ì¥ ì‹¤íŒ¨  
**í•´ê²°ì±…**: ëª¨ë“  localStorage ì ‘ê·¼ì„ ë˜í¼ í´ë˜ìŠ¤ë¡œ ë³´í˜¸

---

### ğŸŸ¡ **Level 2: ê¸°ëŠ¥ì  ì˜¤ë¥˜** (ì¼ë¶€ ê¸°ëŠ¥ ì‹¤íŒ¨)

#### 2.1 Date ê°ì²´ ì§ë ¬í™”/ì—­ì§ë ¬í™” ì˜¤ë¥˜
```typescript
// âŒ ë¬¸ì œ ìƒí™©
const expense = { date: new Date(), amount: 5000 };
localStorage.setItem('expense', JSON.stringify(expense));
const loaded = JSON.parse(localStorage.getItem('expense')); 
// loaded.dateëŠ” ë¬¸ìì—´! Date ë©”ì„œë“œ ì‚¬ìš© ë¶ˆê°€

// âœ… í•´ê²° íŒ¨í„´
const loadExpenses = async () => {
  try {
    const savedExpenses = LocalStorage.get('EXPENSES', []);
    
    // Date ê°ì²´ë¡œ ì•ˆì „í•˜ê²Œ ë³€í™˜
    const expenses = savedExpenses.map((expense: Expense) => ({
      ...expense,
      date: new Date(expense.date),          // ë¬¸ìì—´ â†’ Date
      createdAt: new Date(expense.createdAt),
      updatedAt: new Date(expense.updatedAt)
    }));
    
    // ìœ íš¨í•˜ì§€ ì•Šì€ ë‚ ì§œ ì²´í¬
    const validExpenses = expenses.filter(expense => 
      !isNaN(expense.date.getTime()) &&
      !isNaN(expense.createdAt.getTime()) &&
      !isNaN(expense.updatedAt.getTime())
    );
    
    if (validExpenses.length !== expenses.length) {
      console.warn(`${expenses.length - validExpenses.length}ê°œì˜ ìœ íš¨í•˜ì§€ ì•Šì€ ë‚ ì§œ ë°ì´í„°ë¥¼ ì œì™¸í–ˆìŠµë‹ˆë‹¤.`);
    }
    
    dispatch({ type: 'SET_EXPENSES', payload: validExpenses });
  } catch (error) {
    console.error('Failed to load expenses:', error);
    dispatch({ type: 'SET_ERROR', payload: 'ì§€ì¶œ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.' });
  }
};
```

**ë°œìƒ ë¹ˆë„**: ğŸ”¥ğŸ”¥ (ë†’ìŒ)  
**ì˜í–¥ë„**: ì˜ëª»ëœ ë‚ ì§œ í‘œì‹œ, í•„í„°ë§ ì˜¤ë¥˜  
**í•´ê²°ì±…**: Date ë³€í™˜ì‹œ í•­ìƒ ìœ íš¨ì„± ê²€ì¦

#### 2.2 ì¤‘ë³µ ID ë°©ì§€ ì˜¤ë¥˜
```typescript
// âŒ ë¬¸ì œ ìƒí™©: ë™ì‹œì— ì—¬ëŸ¬ ì§€ì¶œ ì¶”ê°€ì‹œ ID ì¶©ëŒ

// âœ… í•´ê²° íŒ¨í„´
const expenseReducer = (state: ExpenseState, action: ExpenseAction): ExpenseState => {
  switch (action.type) {
    case 'ADD_EXPENSE':
      // ì¤‘ë³µ ID ì²´í¬
      if (state.expenses.some(expense => expense.id === action.payload.id)) {
        console.warn('Expense with this ID already exists:', action.payload.id);
        return state; // ì¤‘ë³µ ì¶”ê°€ ë°©ì§€
      }
      return { 
        ...state, 
        expenses: [...state.expenses, action.payload], 
        error: null 
      };
      
    case 'DELETE_EXPENSE':
      const filteredExpenses = state.expenses.filter(expense => expense.id !== action.payload);
      // ì‚­ì œí•  í•­ëª©ì´ ì—†ìœ¼ë©´ ê²½ê³ 
      if (filteredExpenses.length === state.expenses.length) {
        console.warn('Cannot delete expense: ID not found:', action.payload);
        return state;
      }
      return { ...state, expenses: filteredExpenses, error: null };
  }
};
```

**ë°œìƒ ë¹ˆë„**: ğŸ”¥ (ì¤‘ê°„)  
**ì˜í–¥ë„**: ë°ì´í„° ì¤‘ë³µ, ë¶ˆì¼ì¹˜  
**í•´ê²°ì±…**: ëª¨ë“  CUD ì‘ì—…ì— ì¤‘ë³µ ì²´í¬ í•„ìˆ˜

---

### ğŸŸ¢ **Level 3: ê²½ê³ /ì•Œë¦¼** (ê¸°ëŠ¥ì€ ë™ì‘í•˜ì§€ë§Œ ì£¼ì˜ í•„ìš”)

#### 3.1 ì„±ëŠ¥ ê´€ë ¨ ê²½ê³ 
```typescript
// React DevToolsì—ì„œ ë°œê²¬ë˜ëŠ” íŒ¨í„´ë“¤

// âŒ ë¬¸ì œ: ë¶ˆí•„ìš”í•œ ë¦¬ë Œë”ë§
const ExpenseItem = ({ expense }) => {
  const handleEdit = () => { /* í¸ì§‘ ë¡œì§ */ }; // ë§¤ë²ˆ ìƒˆ í•¨ìˆ˜ ìƒì„±
  const handleDelete = () => { /* ì‚­ì œ ë¡œì§ */ }; // ë§¤ë²ˆ ìƒˆ í•¨ìˆ˜ ìƒì„±
};

// âœ… í•´ê²° íŒ¨í„´  
const ExpenseItem = ({ expense, onEdit, onDelete }) => {
  // ë¶€ëª¨ì—ì„œ useCallbackìœ¼ë¡œ ìµœì í™”ëœ í•¨ìˆ˜ë¥¼ ë°›ìŒ
  const handleEdit = () => onEdit(expense);
  const handleDelete = () => onDelete(expense.id);
};

// ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ì—ì„œ
const ExpenseList = ({ expenses }) => {
  const handleEdit = useCallback((expense: Expense) => {
    setEditingExpense(expense);
  }, []);
  
  const handleDelete = useCallback((expenseId: string) => {
    deleteExpense(expenseId);
  }, [deleteExpense]);
};
```

#### 3.2 ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ë°©ì§€ íŒ¨í„´
```typescript
// âœ… ë¹„ë™ê¸° ì‘ì—… cleanup íŒ¨í„´ (2025ë…„ í•„ìˆ˜!)
useEffect(() => {
  let isCancelled = false; // cleanupì„ ìœ„í•œ í”Œë˜ê·¸

  const loadData = async () => {
    if (isCancelled) return;
    
    try {
      // ê¸´ ë¹„ë™ê¸° ì‘ì—…...
      if (isCancelled) return; // ì¤‘ê°„ ì²´í¬
      
      // ìƒíƒœ ì—…ë°ì´íŠ¸
      if (!isCancelled) {
        setState(data);
      }
    } catch (error) {
      if (!isCancelled) {
        setError(error.message);
      }
    }
  };

  loadData();
  
  // cleanup í•¨ìˆ˜
  return () => {
    isCancelled = true;
  };
}, []);
```

---

## ğŸ›¡ï¸ ë°©ì–´ì  í”„ë¡œê·¸ë˜ë° ì²´í¬ë¦¬ìŠ¤íŠ¸

### âœ… Context API ì‚¬ìš©ì‹œ
- [ ] ëª¨ë“  ì»¤ìŠ¤í…€ í›…ì— undefined ì²´í¬
- [ ] Provider ì™¸ë¶€ì—ì„œ ì‚¬ìš©ì‹œ ëª…í™•í•œ ì—ëŸ¬ ë©”ì‹œì§€
- [ ] `throw new Error`ë¡œ ì¡°ê¸° ì‹¤íŒ¨ (Fail Fast)

### âœ… ë¹„ë™ê¸° ì‘ì—…ì‹œ
- [ ] try-catch-finally êµ¬ì¡° ì‚¬ìš©
- [ ] `isCancelled` í”Œë˜ê·¸ë¡œ cleanup
- [ ] loading/error ìƒíƒœ ì ì ˆíˆ ê´€ë¦¬
- [ ] ì‚¬ìš©ì ì¹œí™”ì  ì—ëŸ¬ ë©”ì‹œì§€ ì œê³µ

### âœ… ë°ì´í„° ì €ì¥/ë¡œë“œì‹œ
- [ ] localStorage ì ‘ê·¼ì„ ë˜í¼ë¡œ ë³´í˜¸
- [ ] Date ê°ì²´ ë³€í™˜ì‹œ ìœ íš¨ì„± ê²€ì¦
- [ ] ê¸°ë³¸ê°’ ì œê³µìœ¼ë¡œ graceful fallback
- [ ] ë°±ì—… ì‹œìŠ¤í…œìœ¼ë¡œ ë°ì´í„° ì†ì‹¤ ë°©ì§€

### âœ… ì‚¬ìš©ì ì¸í„°ë™ì…˜ì‹œ
- [ ] ì¤‘ë³µ ì œì¶œ ë°©ì§€ (isSubmitting ìƒíƒœ)
- [ ] ëª¨ë“  ì•¡ì…˜ì— í”¼ë“œë°± ì œê³µ (ì„±ê³µ/ì‹¤íŒ¨ ì•Œë¦¼)
- [ ] ì—ëŸ¬ ë°œìƒí•´ë„ ê¸°ë³¸ ê¸°ëŠ¥ ìœ ì§€
- [ ] ëª…í™•í•˜ê³  ì‹¤í–‰ ê°€ëŠ¥í•œ ì—ëŸ¬ ë©”ì‹œì§€

---

## ğŸš¨ ìì£¼ ë°œìƒí•˜ëŠ” ì˜¤ë¥˜ ì‚¬ë¡€ì§‘

### ì‚¬ë¡€ 1: "useExpenses must be used within an ExpenseProvider"
**ì›ì¸**: Context Provider ì„¤ì • ëˆ„ë½  
**í•´ê²°**: App.tsxì—ì„œ Provider ìˆœì„œ í™•ì¸  
**ì˜ˆë°©**: ëª¨ë“  ì»¤ìŠ¤í…€ í›…ì— undefined ì²´í¬ í•„ìˆ˜

### ì‚¬ë¡€ 2: "Failed to parse categories: Unexpected token"
**ì›ì¸**: localStorage ë°ì´í„° ì†ìƒ  
**í•´ê²°**: JSON.parse ë˜í¼ë¡œ ì•ˆì „ ì²˜ë¦¬  
**ì˜ˆë°©**: ëª¨ë“  JSON íŒŒì‹±ì„ try-catchë¡œ ë³´í˜¸

### ì‚¬ë¡€ 3: "Cannot read property 'getTime' of undefined"
**ì›ì¸**: Date ê°ì²´ê°€ ë¬¸ìì—´ë¡œ ì €ì¥ë˜ì–´ ë©”ì„œë“œ ì‚¬ìš© ë¶ˆê°€  
**í•´ê²°**: new Date() ë³€í™˜ í›„ ìœ íš¨ì„± ê²€ì¦  
**ì˜ˆë°©**: ëª¨ë“  Date ì‚¬ìš© ì „ instanceof Date ì²´í¬

### ì‚¬ë¡€ 4: ì¤‘ë³µ ì§€ì¶œ ì¶”ê°€ (Double Submit)
**ì›ì¸**: ì‚¬ìš©ìê°€ ì €ì¥ ë²„íŠ¼ ë¹ ë¥´ê²Œ ì—¬ëŸ¬ ë²ˆ í´ë¦­  
**í•´ê²°**: isSubmitting ìƒíƒœë¡œ ì¤‘ë³µ ë°©ì§€  
**ì˜ˆë°©**: ëª¨ë“  ì œì¶œ ë²„íŠ¼ì— loading ìƒíƒœ ì ìš©

### ì‚¬ë¡€ 5: ë°±ì—… ìƒì„± ì‹¤íŒ¨ (IndexedDB ì ‘ê·¼ ì œí•œ)
**ì›ì¸**: ë¸Œë¼ìš°ì € ì„¤ì •ì´ë‚˜ ì €ì¥ê³µê°„ ë¶€ì¡±  
**í•´ê²°**: localStorageë¡œ fallback, ì—ëŸ¬ ë©”ì‹œì§€ í‘œì‹œ  
**ì˜ˆë°©**: ë°±ì—… ì„±ê³µ/ì‹¤íŒ¨ ëª¨ë‹ˆí„°ë§

---

## ğŸ”§ ì˜¤ë¥˜ í•´ê²° ë””ë²„ê¹… ê°€ì´ë“œ

### 1ë‹¨ê³„: ì˜¤ë¥˜ ìœ„ì¹˜ íŒŒì•…
```typescript
// React DevTools Consoleì—ì„œ í™•ì¸í•  ìˆ˜ ìˆëŠ” ë©”ì‹œì§€ë“¤

"useExpenses must be used within an ExpenseProvider"
â†’ ìœ„ì¹˜: hooks/useExpenses.ts:5  
â†’ ì›ì¸: Provider ì„¤ì • ë¬¸ì œ
â†’ í•´ê²°: App.tsx Provider ìˆœì„œ í™•ì¸

"Failed to load expenses: SyntaxError"  
â†’ ìœ„ì¹˜: context/ExpenseContext.tsx:45
â†’ ì›ì¸: localStorage ë°ì´í„° ì†ìƒ
â†’ í•´ê²°: localStorage ì´ˆê¸°í™” í›„ ì¬ì‹œì‘
```

### 2ë‹¨ê³„: ì—ëŸ¬ ìƒíƒœ ë³µêµ¬
```typescript
// ì—ëŸ¬ ë³µêµ¬ë¥¼ ìœ„í•œ ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜
export const recoverFromError = async (errorType: string) => {
  switch (errorType) {
    case 'STORAGE_ERROR':
      // localStorage ì´ˆê¸°í™” í›„ ê¸°ë³¸ ë°ì´í„°ë¡œ ë³µêµ¬
      LocalStorage.clear();
      await initializeDefaultData();
      break;
      
    case 'BACKUP_ERROR':
      // ê°€ì¥ ìµœê·¼ ë°±ì—…ì—ì„œ ë³µêµ¬
      const latestBackup = await getLatestBackup();
      if (latestBackup) {
        await restoreFromBackup(latestBackup);
      }
      break;
      
    case 'DATE_PARSE_ERROR':
      // ì˜ëª»ëœ ë‚ ì§œ ë°ì´í„° ì •ë¦¬
      await cleanupInvalidDates();
      break;
  }
};
```

---

## ğŸ“ˆ ì˜¤ë¥˜ ëª¨ë‹ˆí„°ë§ ë° ë¶„ì„

### ì‹¤ì œ ë°œìƒí•œ ì˜¤ë¥˜ í†µê³„ (ê°œë°œ ê¸°ê°„ ì¤‘)

| ì˜¤ë¥˜ ìœ í˜• | ë°œìƒ ë¹ˆë„ | í•´ê²° ì‹œê°„ | ì˜í–¥ë„ |
|-----------|----------|-----------|---------|
| Context undefined | 15íšŒ | 10ë¶„ | ë†’ìŒ |
| localStorage íŒŒì‹± | 8íšŒ | 5ë¶„ | ì¤‘ê°„ |
| Date ë³€í™˜ ì˜¤ë¥˜ | 12íšŒ | 15ë¶„ | ì¤‘ê°„ |
| ì¤‘ë³µ ì œì¶œ | 6íšŒ | 20ë¶„ | ë‚®ìŒ |
| ë°±ì—… ì‹¤íŒ¨ | 3íšŒ | 30ë¶„ | ë‚®ìŒ |

### ì˜¤ë¥˜ ì˜ˆë°© íš¨ê³¼

**Before: ë°©ì–´ì  í”„ë¡œê·¸ë˜ë° ì ìš© ì „**
```
- í‰ê·  ì˜¤ë¥˜ ë°œìƒ: 3-4íšŒ/ì‹œê°„
- ë””ë²„ê¹… ì‹œê°„: ì „ì²´ ê°œë°œ ì‹œê°„ì˜ 30%
- ì‚¬ìš©ì ê²½í—˜: ì˜ˆìƒì¹˜ ëª»í•œ ì•± ì¤‘ë‹¨ ë¹ˆë°œ
```

**After: ì²´ê³„ì  ì˜¤ë¥˜ ì²˜ë¦¬ ì ìš© í›„**
```
- í‰ê·  ì˜¤ë¥˜ ë°œìƒ: 0-1íšŒ/ì‹œê°„ (75% ê°ì†Œ)
- ë””ë²„ê¹… ì‹œê°„: ì „ì²´ ê°œë°œ ì‹œê°„ì˜ 10% (66% ê°ì†Œ)
- ì‚¬ìš©ì ê²½í—˜: ì•ˆì •ì , ëª…í™•í•œ í”¼ë“œë°±
```

---

## ğŸ¯ ì˜¤ë¥˜ ì²˜ë¦¬ Best Practices

### 1. ì—ëŸ¬ í•¸ë“¤ë§ ë ˆë²¨ë³„ ì „ëµ

```typescript
// Level 1: ì‹œìŠ¤í…œ ë ˆë²¨ (Context, í•µì‹¬ ì¸í”„ë¼)
const useExpenses = () => {
  const context = useContext(ExpenseContext);
  if (context === undefined) {
    // ê°œë°œìë¥¼ ìœ„í•œ ëª…í™•í•œ ë©”ì‹œì§€
    throw new Error('useExpenses must be used within an ExpenseProvider');
  }
  return context;
};

// Level 2: ê¸°ëŠ¥ ë ˆë²¨ (CRUD ì‘ì—…)
const addExpense = async (expenseData: ExpenseFormData) => {
  try {
    // ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ê²€ì¦
    if (!expenseData.description || expenseData.amount <= 0) {
      throw new Error('ìœ íš¨í•˜ì§€ ì•Šì€ ì§€ì¶œ ë°ì´í„°ì…ë‹ˆë‹¤.');
    }
    
    // ì‹¤ì œ ì €ì¥ ì‘ì—…
    const result = await saveExpense(expenseData);
    return result;
  } catch (error) {
    // ì‚¬ìš©ìë¥¼ ìœ„í•œ ì¹œí™”ì  ë©”ì‹œì§€
    showNotification('ì§€ì¶œ ì €ì¥ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.', 'error');
    throw error; // í˜¸ì¶œìê°€ ì¶”ê°€ ì²˜ë¦¬ í•  ìˆ˜ ìˆê²Œ
  }
};

// Level 3: UI ë ˆë²¨ (ì‚¬ìš©ì ì¸í„°ë™ì…˜)
const handleSubmit = async () => {
  if (isSubmitting) return; // ì¤‘ë³µ ì œì¶œ ë°©ì§€
  
  setIsSubmitting(true);
  try {
    await addExpense(formData);
    showNotification('ì§€ì¶œì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!', 'success');
    onSuccess?.();
  } catch (error) {
    // ì´ë¯¸ addExpenseì—ì„œ ì•Œë¦¼ ì²˜ë¦¬ë¨
    console.error('Form submission failed:', error);
  } finally {
    // ë²„íŠ¼ í™œì„±í™” ì§€ì—° (ë„ˆë¬´ ë¹ ë¥¸ ì¬í´ë¦­ ë°©ì§€)
    setTimeout(() => setIsSubmitting(false), 500);
  }
};
```

### 2. Exhaustive Check íŒ¨í„´ (TypeScript)

```typescript
// âœ… ëª¨ë“  ì¼€ì´ìŠ¤ë¥¼ ì»´íŒŒì¼ íƒ€ì„ì— ì²´í¬
const expenseReducer = (state: ExpenseState, action: ExpenseAction): ExpenseState => {
  // ì•¡ì…˜ ìœ íš¨ì„± ì²´í¬
  if (!action || typeof action.type !== 'string') {
    console.error('Invalid action received:', action);
    return state;
  }
  
  switch (action.type) {
    case 'SET_LOADING':
      return { ...state, loading: action.payload };
    case 'SET_ERROR':
      return { ...state, error: action.payload };
    case 'ADD_EXPENSE':
      return { ...state, expenses: [...state.expenses, action.payload] };
    // ... ë‹¤ë¥¸ ì¼€ì´ìŠ¤ë“¤
    
    default:
      // ìƒˆë¡œìš´ ì•¡ì…˜ íƒ€ì… ì¶”ê°€ì‹œ ì»´íŒŒì¼ ì—ëŸ¬ ë°œìƒ â†’ ë¹ ëœ¨ë¦° ì¼€ì´ìŠ¤ ë°©ì§€
      const exhaustiveCheck: never = action;
      console.error('Unhandled action type:', exhaustiveCheck);
      return state;
  }
};
```

### 3. ì‚¬ìš©ì ê²½í—˜ ì¤‘ì‹¬ ì—ëŸ¬ ì²˜ë¦¬

```typescript
// âœ… ë‹¨ê³„ë³„ ì‚¬ìš©ì í”¼ë“œë°±
const ExpenseForm = () => {
  const [notification, setNotification] = useState({
    open: false,
    message: '',
    severity: 'success' as 'success' | 'error'
  });

  const showUserFriendlyError = (error: unknown) => {
    let message: string;
    
    if (error instanceof Error) {
      // íŠ¹ì • ì—ëŸ¬ì— ë”°ë¥¸ ë§ì¶¤í˜• ë©”ì‹œì§€
      switch (error.message) {
        case 'STORAGE_QUOTA_EXCEEDED':
          message = 'ì €ì¥ ê³µê°„ì´ ë¶€ì¡±í•©ë‹ˆë‹¤. ë¶ˆí•„ìš”í•œ ë°ì´í„°ë¥¼ ì‚­ì œí•´ì£¼ì„¸ìš”.';
          break;
        case 'INVALID_DATE':
          message = 'ì˜¬ë°”ë¥¸ ë‚ ì§œë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.';
          break;
        case 'AMOUNT_TOO_LARGE':
          message = 'ê¸ˆì•¡ì´ ë„ˆë¬´ í½ë‹ˆë‹¤. 1000ë§Œì› ì´í•˜ë¡œ ì…ë ¥í•´ì£¼ì„¸ìš”.';
          break;
        default:
          message = 'ì¼ì‹œì ì¸ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.';
      }
    } else {
      message = 'ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.';
    }
    
    setNotification({
      open: true,
      message,
      severity: 'error'
    });
  };
};
```

---

## ğŸ”„ ì˜¤ë¥˜ ë³µêµ¬ ìë™í™”

### 1. ìë™ ë°±ì—… ì‹œìŠ¤í…œì„ í†µí•œ ë°ì´í„° ë³µêµ¬

```typescript
// ì‹¤ì œ êµ¬í˜„ëœ ë°±ì—… ê¸°ë°˜ ë³µêµ¬ ì‹œìŠ¤í…œ
const autoRecoveryManager = {
  async handleCriticalError(errorType: string) {
    console.error(`Critical error detected: ${errorType}`);
    
    try {
      // 1. ìµœì‹  ë°±ì—… í™•ì¸
      const latestBackup = await getLatestValidBackup();
      
      if (latestBackup) {
        // 2. ë°±ì—…ì—ì„œ ë³µêµ¬
        await restoreFromBackup(latestBackup);
        
        // 3. ì‚¬ìš©ìì—ê²Œ ë³µêµ¬ ì™„ë£Œ ì•Œë¦¼
        showNotification(
          'ë°ì´í„°ê°€ ìë™ìœ¼ë¡œ ë³µêµ¬ë˜ì—ˆìŠµë‹ˆë‹¤. ìµœê·¼ ë°±ì—…ìœ¼ë¡œ ë˜ëŒì•„ê°”ìŠµë‹ˆë‹¤.',
          'success'
        );
        
        return true;
      } else {
        // 4. ë°±ì—…ì´ ì—†ìœ¼ë©´ ì´ˆê¸° ë°ì´í„°ë¡œ ë³µêµ¬
        await initializeDefaultData();
        showNotification(
          'ë°ì´í„°ë¥¼ ì´ˆê¸° ìƒíƒœë¡œ ë³µêµ¬í–ˆìŠµë‹ˆë‹¤.',
          'warning'
        );
        
        return false;
      }
    } catch (recoveryError) {
      console.error('Recovery failed:', recoveryError);
      showNotification(
        'ìë™ ë³µêµ¬ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ìˆ˜ë™ìœ¼ë¡œ ë°ì´í„°ë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”.',
        'error'
      );
      return false;
    }
  }
};
```

### 2. ì ì§„ì  ì‹¤íŒ¨ (Graceful Degradation)

```typescript
// âœ… ê¸°ëŠ¥ë³„ ë…ë¦½ì  ì˜¤ë¥˜ ì²˜ë¦¬
const Dashboard = () => {
  const [chartsError, setChartsError] = useState<string | null>(null);
  const [statsError, setStatsError] = useState<string | null>(null);
  
  return (
    <Box>
      {/* í†µê³„ ì¹´ë“œ - ì—ëŸ¬ ë°œìƒí•´ë„ ì°¨íŠ¸ëŠ” í‘œì‹œ */}
      {statsError ? (
        <Alert severity="warning">
          í†µê³„ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì°¨íŠ¸ëŠ” ì •ìƒ í‘œì‹œë©ë‹ˆë‹¤.
        </Alert>
      ) : (
        <StatsCards />
      )}
      
      {/* ì°¨íŠ¸ - ì—ëŸ¬ ë°œìƒí•´ë„ í†µê³„ëŠ” í‘œì‹œ */}
      {chartsError ? (
        <Alert severity="warning">
          ì°¨íŠ¸ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. í†µê³„ ì •ë³´ëŠ” ì •ìƒ í‘œì‹œë©ë‹ˆë‹¤.
        </Alert>
      ) : (
        <ExpenseCharts />
      )}
    </Box>
  );
};
```

---

## ğŸ“š ê´€ë ¨ í•™ìŠµ ìë£Œ

### ì‹¤ì „ ì‚¬ë¡€
- **Context API ì—ëŸ¬ ì²˜ë¦¬** â†’ [2025-08-07 í•™ìŠµìƒì„¸](../í•™ìŠµìƒì„¸/2025-08-07/01-ë³µí•©-ì»´í¬ë„ŒíŠ¸-ì‹œìŠ¤í…œ-ì•„í‚¤í…ì²˜.md)
- **ë°ì´í„° ì˜ì†ì„± ì˜¤ë¥˜** â†’ [2025-08-10 í•™ìŠµìƒì„¸](../í•™ìŠµìƒì„¸/2025-08-10/01-ë°ì´í„°-ì§€ì†ì„±-ì•„í‚¤í…ì²˜-ì™„ì „-êµ¬í˜„.md)

### ì‹¬í™” í•™ìŠµ
- [Error Boundaries](https://react.dev/reference/react/Component#catching-rendering-errors-with-an-error-boundary)
- [React DevTools Profiler](https://react.dev/reference/react-dom/client/createRoot#measuring-performance)

---

## ğŸ† í•µì‹¬ ì›ì¹™

1. **Fail Fast**: ë¬¸ì œë¥¼ ì¡°ê¸°ì— ë°œê²¬í•˜ê³  ëª…í™•í•œ ë©”ì‹œì§€ ì œê³µ
2. **Graceful Degradation**: ì¼ë¶€ ê¸°ëŠ¥ ì‹¤íŒ¨í•´ë„ ì „ì²´ ì•±ì€ ë™ì‘ ìœ ì§€  
3. **User-Centric**: ê¸°ìˆ ì  ì˜¤ë¥˜ë¥¼ ì‚¬ìš©ì ì¹œí™”ì  ì–¸ì–´ë¡œ ë³€í™˜
4. **Recovery-Ready**: ìë™ ë°±ì—…ê³¼ ë³µêµ¬ ì‹œìŠ¤í…œìœ¼ë¡œ ë°ì´í„° ì†ì‹¤ ë°©ì§€
5. **Performance-Aware**: ì˜¤ë¥˜ ì²˜ë¦¬ ìì²´ê°€ ì„±ëŠ¥ ì €í•˜ ìš”ì¸ì´ ë˜ì§€ ì•Šë„ë¡

**ğŸ’¡ í•µì‹¬**: ì˜¤ë¥˜ëŠ” ì˜ˆì™¸ì  ìƒí™©ì´ ì•„ë‹ˆë¼ ì •ìƒì ì¸ ì†Œí”„íŠ¸ì›¨ì–´ ë™ì‘ì˜ ì¼ë¶€ë‹¤. ì² ì €í•œ ì¤€ë¹„ì™€ ì²´ê³„ì ì¸ ì²˜ë¦¬ë¡œ ì•ˆì •ì ì¸ ì‚¬ìš©ì ê²½í—˜ì„ ì œê³µí•˜ì!